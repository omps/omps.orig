
<!DOCTYPE html>
<!--[if IEMobile 7 ]><html class="no-js iem7"><![endif]-->
<!--[if lt IE 9]><html class="no-js lte-ie8"><![endif]-->
<!--[if (gt IE 8)|(gt IEMobile 7)|!(IEMobile)|!(IE)]><!--><html class="no-js" lang="en"><!--<![endif]-->
<head>
  <meta charset="utf-8">
  <title>Om Prakash Singh</title>
  <meta name="author" content="Om Prakash Singh">

  
  <meta name="description" content="Vagrant Boxes are prepackaged development environments that are the foundation of Vagrant. In most cases, this is usually just a stripped and naked &hellip;">
  

  <!-- http://t.co/dKP3o1e -->
  <meta name="HandheldFriendly" content="True">
  <meta name="MobileOptimized" content="320">
  <meta name="viewport" content="width=device-width, initial-scale=1">

  
  <link rel="canonical" href="http://www.omps.in/blog">
  <link href="/favicon.png" rel="icon">
  <link href="/stylesheets/screen.css" media="screen, projection" rel="stylesheet" type="text/css">
  <link href="/atom.xml" rel="alternate" title="Om Prakash Singh" type="application/atom+xml">
  <script src="/javascripts/modernizr-2.0.js"></script>
  <script src="//ajax.googleapis.com/ajax/libs/jquery/1.9.1/jquery.min.js"></script>
  <script>!window.jQuery && document.write(unescape('%3Cscript src="/javascripts/libs/jquery.min.js"%3E%3C/script%3E'))</script>
  <script src="/javascripts/octopress.js" type="text/javascript"></script>
  <!--Fonts from Google"s Web font directory at http://google.com/webfonts -->
<link href="//fonts.googleapis.com/css?family=PT+Serif:regular,italic,bold,bolditalic" rel="stylesheet" type="text/css">
<link href="//fonts.googleapis.com/css?family=Open+Sans" rel="stylesheet" type="text/css">
<link href="//fonts.googleapis.com/css?family=Fjalla+One" rel="stylesheet" type="text/css">
<!--- MathJax Configuration -->
<script type="text/javascript" src="//cdn.mathjax.org/mathjax/latest/MathJax.js?config=TeX-AMS-MML_HTMLorMML"></script>
  

</head>

<body   class="collapse-sidebar sidebar-footer" >
  <header role="banner"><hgroup>
  <h1><a href="/">Om Prakash Singh</a></h1>
  
    <h2>Technology and me</h2>
  
</hgroup>

</header>
  <nav role="navigation"><ul class="subscribe" data-subscription="rss">
  <li><a href="/atom.xml" rel="subscribe-rss" title="subscribe via RSS" target="_blank"><svg version="1.1" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" width="25" height="25" viewbox="0 0 100 100"><path class="social" d="M 13.310204,73.332654 C 5.967347,73.332654 0,79.322448 0,86.621428 c 0,7.338776 5.967347,13.262246 13.310204,13.262246 7.370408,0 13.328572,-5.92245 13.328572,-13.262246 0,-7.29898 -5.958164,-13.288774 -13.328572,-13.288774 z M 0.01530612,33.978572 V 53.143878 C 12.493878,53.143878 24.229592,58.02347 33.068368,66.865306 41.894898,75.685714 46.767346,87.47449 46.767346,100 h 19.25 C 66.017346,63.592858 36.4,33.979592 0.01530612,33.978572 l 0,0 z M 0.03877552,0 V 19.17449 C 44.54796,19.17551 80.77551,55.437756 80.77551,100 H 100 C 100,44.87653 55.15102,0 0.03877552,0 z"></path></svg></a></li>
  
</ul>
  
  
  
  
  
<ul class="subscribe">
  <li><a href="https://github.com/omps" rel="subscribe-github" title="@omps on GitHub" target="_blank"><svg version="1.1" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" width="25" height="25" viewbox="0 0 100 100"><path class="social" d="M 50,0 C 22.385714,0 0,22.385714 0,50 0,77.614286 22.385714,100 50,100 77.614286,100 100,77.614286 100,50 100,22.385714 77.614286,0 50,0 z m 29.692858,79.692858 c -3.859184,3.859182 -8.351022,6.887754 -13.35,9.00306 -1.27041,0.536736 -2.560204,1.009184 -3.867348,1.415306 v -7.493878 c 0,-3.938774 -1.35102,-6.835714 -4.053062,-8.690816 1.692858,-0.163264 3.24694,-0.390816 4.663266,-0.683672 1.416326,-0.292858 2.913266,-0.716328 4.491838,-1.27041 1.57857,-0.55408 2.994896,-1.213264 4.247958,-1.97755 1.253062,-0.765306 2.458164,-1.758164 3.613266,-2.978572 1.155102,-1.220408 2.12449,-2.604082 2.905102,-4.15 0.780612,-1.545918 1.4,-3.40204 1.855102,-5.566326 0.455102,-2.164286 0.683674,-4.54898 0.683674,-7.153062 0,-5.045918 -1.643878,-9.341836 -4.931634,-12.890816 C 77.44796,33.35 77.285714,29.10204 75.463266,24.512244 l -1.22143,-0.145918 c -0.845918,-0.09796 -2.368366,0.260204 -4.565306,1.07449 -2.196938,0.814286 -4.663264,2.14796 -7.396938,4.004082 -3.87449,-1.07449 -7.893878,-1.611224 -12.061224,-1.611224 -4.19898,0 -8.203062,0.536734 -12.012246,1.611224 -1.72449,-1.17245 -3.361224,-2.139796 -4.907142,-2.905102 C 31.753062,25.77449 30.516326,25.254082 29.587756,24.97653 28.660204,24.7 27.79796,24.528572 27,24.463266 c -0.79796,-0.0653 -1.310204,-0.08062 -1.537756,-0.04898 -0.22755,0.03164 -0.390816,0.0653 -0.487754,0.09796 -1.82347,4.62245 -1.985714,8.87143 -0.487756,12.743878 -3.287754,3.54796 -4.931632,7.844898 -4.931632,12.890816 0,2.604082 0.227552,4.988776 0.683674,7.153062 0.456122,2.164286 1.07449,4.020408 1.855102,5.566326 0.780612,1.545918 1.75,2.929592 2.905102,4.15 1.155102,1.220408 2.360204,2.213266 3.613264,2.978572 1.253062,0.766326 2.669388,1.42449 4.24796,1.97755 1.578572,0.554082 3.07551,0.976532 4.491836,1.27041 1.416328,0.292856 2.970408,0.521428 4.663266,0.683672 -2.669388,1.82347 -4.004082,4.720408 -4.004082,8.690816 v 7.639796 C 36.536734,89.818368 35.083674,89.3 33.656122,88.695918 c -4.99898,-2.115306 -9.490816,-5.143878 -13.35,-9.00306 -3.859184,-3.859184 -6.887754,-8.351022 -9.00306,-13.35 C 9.1163263,61.171428 8.0071428,55.67347 8.0071428,50 c 0,-5.67347 1.1091835,-11.171428 3.2969392,-16.342858 2.115306,-4.998978 5.143878,-9.490816 9.00306,-13.35 3.859184,-3.859182 8.351022,-6.887754 13.35,-9.00306 C 38.828572,9.1163266 44.32653,8.0071428 50,8.0071428 c 5.67347,0 11.171428,1.1091838 16.342858,3.2969392 5,2.115306 9.490816,5.143878 13.35,9.00306 3.859182,3.859184 6.887754,8.351022 9.00306,13.35 2.186736,5.17245 3.295918,10.67041 3.295918,16.342858 0,5.672448 -1.109182,11.171428 -3.296938,16.342858 -2.115306,4.998978 -5.143878,9.490816 -9.00204,13.35 l 0,0 z"></path></svg></a></li>
</ul>
  
  
  
<ul class="subscribe">
  <li><a href="https://twitter.com/ohgnis" rel="subscribe-twitter" title="@ohgnis on Twitter" target="_blank"><svg version="1.1" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" width="25" height="25" viewBox="0 0 512 512"><path class="social" d="M0.001,334.932c33.327,30.816,118.891,59.981,188.517-8.271c-12.52,1.955-22.972-0.416-30.913-8.269
  c-7.531-7.465-7.945-15.182-3.914-22.202c3.275-5.725,10.184-9.741,16.977-13.934c-12.323,2.285-22.829,1.095-32.218-3.706
  c-12.604-6.444-24.863-13.228-28.3-27.207c7.71-8.112,16.28-15.359,34.831-12.627c-17.45-5.83-33.087-13.429-44.41-24.815
  c-11.028-11.091-12.163-18.302-13.932-26.996c9.632-3.567,19.688-5.421,30.478-4.353c-24.397-12.476-34.757-29.63-40.487-48.325
  c-1.731-5.652-2.044-11.03-1.31-16.545c98.826,37.305,145.11,64.109,170.662,89.251c11.496-30.589,38.3-99.868,78.371-123.646
  c0.191,3.77-1.309,7.837-4.357,12.189c11.863-6.609,21.125-17.188,37.445-16.98c-1.879,7.723-7.279,13.904-17.85,17.854
  c10.662-4.084,21.463-7.545,32.65-9.578c10.375-1.881,10.229,6.304,4.355,10.444c-11.916,8.412-24.578,9.456-37.006,13.498
  c38.105,0.949,69.266,18.994,93.604,58.343c8.088,13.074,13.52,26.149,14.807,40.487c16.254,4.563,32.426,5.494,48.76,2.61
  c4.475-0.796,8.645-1.63,12.627-3.482c-6.354,9.529-13.686,17.356-23.947,20.899c-9.811,3.387-19.637,6.688-30.473,6.968
  c17.641,6.675,37.082,7.045,57.033,5.659c-24.402,23.486-43.08,22.922-61.824,22.642c-8.221,34.703-25.025,69.315-60.52,101.005
  c-46.559,41.569-96.678,61.397-148.457,65.742c-48.552,4.07-95.488,3.512-146.726-20.464
  C56.486,393.349,24.648,368.884,0.001,334.932L0.001,334.932z"/></svg></a></li>
</ul>
  
  
  
  
  
  
    
      <form action="https://www.google.com/search" method="get">
        <fieldset role="search">
          <input type="hidden" name="sitesearch" value="www.omps.in" />
    
          <input class="search" type="text" name="q" results="0" placeholder="Search"/>
        </fieldset>
      </form>
  
<ul class="main-navigation">
  <li><a href="/">Home</a></li>
  <li><a href="/blog/index.html">Blog</a></li>
  <li><a href="/books">Books I'm Reading</a></li>
  <li><a href="/about">About</a></li>
</ul>

</nav>
  <div id="main">
    <div id="content">
      <div class="blog-index">
  
  
  
    <article>
      
  <header>
    
      <h1 class="entry-title"><a href="/blog/2016/04/25/create-box-from-vagrant-virtualmachines/">Create Box From Vagrant Virtualmachines</a></h1>
    
    
      <p class="meta">
        




<time class='entry-date' datetime='2016-04-25T11:16:50+05:30'><span class='date'><span class='date-month'>Apr</span> <span class='date-day'>25</span><span class='date-suffix'>th</span>, <span class='date-year'>2016</span></span> <span class='time'>11:16 am</span></time>
        
         | <a href="/blog/2016/04/25/create-box-from-vagrant-virtualmachines/#disqus_thread">Comments</a>
        
        
      </p>
    
  </header>


  <div class="entry-content"><p>Vagrant Boxes are prepackaged development environments that are the foundation of Vagrant. In most cases, this is usually just a stripped and naked operating system such as Ubuntu, Debian, or CentOS. Boxes exist with the intention to be provisioned with additional features like Apache and PHP using tools like Chef or Puppet. This is really powerful, but it can be time consuming to setup the first configuration and difficult for beginners. Plus, not everyone has the skill-set of a system admin or work with a huge collaborative team.</p>

<p>This post will describe to you how to create your own prepackaged Vagrant Box from and existing virtual machine. In my opinion, it’s the quickest and easiest way for beginners to get started with Vagrant. This way you’ll be able to reuse it over and over and even share it. I feel this generally goes against the main idea of Vagrant where you provision your development environments from a single config. You generally lose a lot of the debugging and configurability of your development environment, but this should be helpful for plenty of developers, teams, and projects regardless.</p>

<ul>
<li>The first thing you’ll need to do is pick a box that you want to build from. The Vagrant Cloud lets you easily find boxes that people have shared. We’ll be working off of Hashicorp’s (Vagrant’s) Precise64. This box is a good one to work off of because Chef and Puppet are already installed, plus all the settings we’re configured by the creator(s) of Vagrant.</li>
</ul>


<p><img src="https://cask.scotch.io/2014/10/popularvagrant.jpg" alt="alt text" /></p>

<ul>
<li><p>After you’ve chosen a box, initialize the Vagrant box. Each one is slightly different, but here’s how to do it for the example we’re doing:</p>

<p>  vagrant init hashicorp/precise64</p></li>
</ul>


<p>This will also create a Vagrant file for you. Now, boot the box with Vagrant by doing (it will need to download if it’s the first time using the it):</p>

<pre><code> vagrant up
</code></pre>

<ul>
<li><p>We’ll now SSH into the box and start customizing it. If you don’t know anything about servers, you can always just use Scotch Box since all of this is already done for you. Here’s how to SSH into the box:</p>

<p>   vagrant ssh</p></li>
</ul>


<p>Now, we need to setup our server by installing whatever we want on it. This example will install a basic LAMP stack, but you can do whatever you like (Ruby, Nginx, etc.). The point of this article isn’t to teach you how to setup a server, but instead how to turn your virtual environment into a Vagrant Box. So this step might be more involved than what is actually shown:</p>

<figure class='code'><figcaption><span></span></figcaption><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
<span class='line-number'>3</span>
<span class='line-number'>4</span>
<span class='line-number'>5</span>
<span class='line-number'>6</span>
<span class='line-number'>7</span>
<span class='line-number'>8</span>
<span class='line-number'>9</span>
<span class='line-number'>10</span>
</pre></td><td class='code'><pre><code class='sh'><span class='line'>sudo apt-get update
</span><span class='line'>sudo apt-get upgrade
</span><span class='line'>sudo apt-get install vim
</span><span class='line'>sudo apt-get install apache2
</span><span class='line'>sudo apt-get install mysql-server libapache2-mod-auth-mysql php5-mysql
</span><span class='line'>sudo mysql_install_db
</span><span class='line'>sudo /usr/bin/mysql_secure_installation
</span><span class='line'>sudo apt-get install php5 libapache2-mod-php5 php5-mcrypt
</span><span class='line'>sudo apt-get install php5-cgi php5-cli php5-curl php5-common php5-gd php5-mysql
</span><span class='line'>sudo service apache2 restart
</span></code></pre></td></tr></table></div></figure>


<ul>
<li><p>We’re now going to clean up disk space on the VM so when we package it into a new Vagrant box, it’s as clean as possible. First, remove APT cache</p>

<p>   sudo apt-get clean</p></li>
</ul>


<p>Then, “zero out” the drive (this is for Ubuntu):</p>

<figure class='code'><figcaption><span></span></figcaption><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
</pre></td><td class='code'><pre><code class='sh'><span class='line'>sudo dd <span class="k">if</span><span class="o">=</span>/dev/zero <span class="nv">of</span><span class="o">=</span>/EMPTY <span class="nv">bs</span><span class="o">=</span>1M
</span><span class='line'>sudo rm -f /EMPTY
</span></code></pre></td></tr></table></div></figure>


<p>Lastly, let’s clear the Bash History and exit the VM:</p>

<pre><code> cat /dev/null &gt; ~/.bash_history &amp;&amp; history -c &amp;&amp; exit
</code></pre>

<ul>
<li><p>We’re now going to repackage the server we just created into a new Vagrant Base Box. It’s very easy with Vagrant:</p>

<p>   vagrant package &ndash;output mynew.box</p></li>
<li><p>The previous command will have created a “mynew.box” file. You can technically put this wherever you want on your computer. Now, let’s add this new Vagrant Box into Vagrant:</p>

<p>   vagrant box add mynewbox mynew.box</p></li>
</ul>


<p>This now will “download” the box into your Vagrant install allowing to initiate this from any folder, but before we do this, let’s delete and remove the Vagrant file we built this box from.</p>

<pre><code>vagrant destroy
rm Vagrantfile
</code></pre>

<ul>
<li><p>We need to now initialize a Vagrant environment from our brand new box using the same command from earlier but referencing the new Box.</p>

<p>   vagrant init mynewbox</p></li>
<li><p>When you initialize the Vagrant environment, it creates a Vagrantfile for you (just like from before). Open the Vagrantfile and delete everything. You can use what was in there as a reference or just use Vagrant’s Official Docs, but we’re going to only use the absolute essentials that I’ve already spelled out for you.</p></li>
</ul>


<p>Now paste the following bare-bones code into your Vagrantfile:</p>

<p>Now let’s create a landing page:</p>

<pre><code> cat index.php
 phpinfo();
</code></pre>

<ul>
<li>Now, visit the IP address from the Vagrantfile in your browser. If everything works, you should see a PHP info dump of the index.php file you just created.</li>
</ul>


<p><img src="https://cask.scotch.io/2014/10/vagrantsuccess.jpg" alt="alt text" /></p>

<ul>
<li>Now that you’ve just created your own Vagrant Base Box from an existing one, you should consider sharing it on the Vagrant Cloud. This way other people can download and use it!</li>
</ul>


<p>There are tons of way of building Vagrant Boxes, and this method is only intended to get you started in the easiest and fastest way. You should consider these additional resources if you want to build from scratch or use a service to help you with the process:</p>

<p>Packer.io – A tool for creating identical machine images for multiple platforms from a single source configuration.
PuPHPet – A simple GUI to set up virtual machines for Web development.
Building a Vagrant Box from Start to Finish
Creating a Custom Vagrant Box from Scratch
Vagrant: Up and Running
Shell Provisioner
Chef Solo Provisioner
Puppet Apply Provisioner</p>

<p>Alternative, if you want to just focus on the code and still use Vagrant, you can use my Vagrant Base Box, Scotch Box.</p>

<p><em>Note</em>: text verbatim from <a href="https://scotch.io/tutorials/how-to-create-a-vagrant-base-box-from-an-existing-one.">https://scotch.io/tutorials/how-to-create-a-vagrant-base-box-from-an-existing-one.</a></p>
</div>
  
  


    </article>
  
  
    <article>
      
  <header>
    
      <h1 class="entry-title"><a href="/blog/2016/04/24/puppet-development-environment/">Puppet Development With Vagrant</a></h1>
    
    
      <p class="meta">
        




<time class='entry-date' datetime='2016-04-24T16:40:46+05:30'><span class='date'><span class='date-month'>Apr</span> <span class='date-day'>24</span><span class='date-suffix'>th</span>, <span class='date-year'>2016</span></span> <span class='time'>4:40 pm</span></time>
        
         | <a href="/blog/2016/04/24/puppet-development-environment/#disqus_thread">Comments</a>
        
        
      </p>
    
  </header>


  <div class="entry-content"><p>I started working DevOps which initiated me to learn the about the configuration management and automation tools, Though it does have a learning curve but it provides great oppurtunity to automate most of your tasks. Don&rsquo;t worry it will not make you redundant, learning automation may indeed inflate your profile. Searching on the internet for the same purpose I encountered with <a href="http://garylarizza.com/">Gary Larizza&rsquo;s</a> blog on <a href="http://garylarizza.com/blog/2013/02/01/repeatable-puppet-development-with-vagrant/">Repeatable puppet development with vagrant</a>. Of course the blog being 3 years old, need some rework with the commands, I am hence updating this article as my updated version of his workflow.</p>

<p>In smaller organizations &lsquo;testing&rsquo; and &lsquo;development&rsquo; consist of making changes directly to the server, logging in to the running system and hoping the commands to just work. Once done we document the changes we made, but more OFTEN we happen to keep the information in our head to refer to it later. This is how the manual configuration works. In bigger organization though the things are pretty neat and ready, a centralized configuration management system with everything automated and well documented and code repositories to version control code. This is not a very likely situation while we are writing modules in a development environment and it really doesn&rsquo;t make sense that we put the code in production environment just to test. We need something smaller setup for ourselves, let it be either for the development environment or for my work setup on my personal laptop to automate the things, menial daily jobs, etc etc.. You never know when you find somethings interesting to automate and this can put us in to the good habit of automating things.</p>

<p>And of course I want to keep these things separate from my laptop base configuration, without spending money for buying additional server HW just to test my development work. Vagrant and Virtualbox are boon for the developers who wanted to produce definitive work from anywhere without being dependent on network connection, any need for special physical hardware and a place to code.</p>

<p>We would require ability to create vm&rsquo;s for the purpose of testing our automation workflow, before committing and pushing it to production nodes.</p>

<p><a href="http://www.puppetlabs.com/">Puppet</a> is a configuration management tool which helps autotmates all the aspects of manual configuration. I won&rsquo;t be putting too much puppet in here, however we will be using it to describe the changes we are making to the system.</p>

<p><a href="http://www.vagrantup.com/">Vagrant</a> is a boon for developers and SA for testing their work without making changes to your comfortable laptop work env. It uses minimal VM&rsquo;s template and create virtualized environment on your workstation for the purpose of testing. While writing this Vagrant has support for almost all the major virtualization providers such as Virtualbox, VMware Fusion, Hyper - V, docker.</p>

<h2>Getting Ready for work.</h2>

<p>The only thing which get installed on your system is Vagrant and Virtualbox(if your dones&rsquo;t have one already installed). If you have never used Vagrant before and NOT an ruby developer, it&rsquo;s good to opt of native installaton, its the easiest method to get Vagrant Installed.</p>

<h3>Installing vagrant</h3>

<p><a href="http://downloads.vagrantup.com/">http://downloads.vagrantup.com/</a> should provide one pre-packaged binary for your OS.</p>

<p>For ruby developers or those who knows RVM and gem installation</p>

<pre><code>$ gem install vagrant --no-ri --no-rdoc
</code></pre>

<p><strong>Note:</strong> stick with <a href="http://downloads.vagrantup.com/">native installers</a> for now, if you are not much aware about RVM and Rbenv.</p>

<p>We will be installing puppet only of to the VM&rsquo;s and not on our system.</p>

<h3>Living in the box</h3>

<p>Vagrant uses box files as templates from which it creates new virtual machine for development machine. <a href="http://vagrantbox.es/">There are sites that host boxes available for download</a>, OR, you could use to build your box using virtualbox. Building your box file is outside the scope of this article, so just make sure you download a box with an OS that’s to your liking. This box DOES NOT need to have Puppet preinstalled – in fact, it’s probably better that it doesn’t (because the version will probably be old, and we’re going to work around this anyways). I’m going to choose a CentOS 7 box, but, and again, it’s up to you.</p>

<p>I usually create my own <a href="http://www./blog/2016/04/25/create-box-from-vagrant-virtualmachines/">box from the exiting vagrant box</a>, my primary purpose is so that I do not have to download the box and reconfigure it again if I plan to destroy existing vagrant environment.</p>

<p><a href="https://atlas.hashicorp.com/boxes/search">https://atlas.hashicorp.com/boxes/search</a> maintains a list of boxes which are very up to date, you might want to download the latest box, incase you haven&rsquo;t downloaded any.</p>

<h3>Fixing your vagrantfile.</h3>

<p>We need to create a VM for the project and a <code>Vagrantfile</code> to direct vagrant on how it should setup your VM. You can create any directory in your home area which you can use for work with puppet.</p>

<figure class='code'><figcaption><span></span></figcaption><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
</pre></td><td class='code'><pre><code class='sh'><span class='line'><span class="nv">$ </span>mkdir -p ~/puppet-vagrant
</span><span class='line'><span class="nv">$ </span><span class="nb">cd</span> ~/puppet-vagrant
</span></code></pre></td></tr></table></div></figure>


<p>Open Vagrantfile in your favorite editor.</p>

<p>Below is the Sample Vagrantfile which I used to get puppet installed on my box.</p>

<figure class='code'><figcaption><span></span></figcaption><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
<span class='line-number'>3</span>
<span class='line-number'>4</span>
<span class='line-number'>5</span>
<span class='line-number'>6</span>
<span class='line-number'>7</span>
</pre></td><td class='code'><pre><code class='ruby'><span class='line'><span class="no">Vagrant</span><span class="o">.</span><span class="n">configure</span><span class="p">(</span><span class="mi">2</span><span class="p">)</span> <span class="k">do</span> <span class="o">|</span><span class="n">config</span><span class="o">|</span>
</span><span class='line'>  <span class="n">config</span><span class="o">.</span><span class="n">vm</span><span class="o">.</span><span class="n">box</span> <span class="o">=</span> <span class="s2">&quot;centos/7&quot;</span>
</span><span class='line'>  <span class="n">config</span><span class="o">.</span><span class="n">vm</span><span class="o">.</span><span class="n">hostname</span> <span class="o">=</span> <span class="s2">&quot;development.puppetlabs.vm&quot;</span>
</span><span class='line'>  <span class="n">config</span><span class="o">.</span><span class="n">vm</span><span class="o">.</span><span class="n">network</span> <span class="s2">&quot;private_network&quot;</span><span class="p">,</span> <span class="ss">ip</span><span class="p">:</span> <span class="s2">&quot;172.31.0.202&quot;</span>
</span><span class='line'>  <span class="n">config</span><span class="o">.</span><span class="n">vm</span><span class="o">.</span><span class="n">network</span> <span class="s2">&quot;forwarded_port&quot;</span><span class="p">,</span> <span class="ss">guest</span><span class="p">:</span> <span class="mi">80</span><span class="p">,</span> <span class="ss">host</span><span class="p">:</span> <span class="mi">8084</span>
</span><span class='line'>  <span class="n">config</span><span class="o">.</span><span class="n">vm</span><span class="o">.</span><span class="n">provision</span> <span class="ss">:shell</span><span class="p">,</span> <span class="ss">:path</span> <span class="o">=&gt;</span> <span class="s2">&quot;centos_7_x.sh&quot;</span>
</span><span class='line'><span class="k">end</span>
</span></code></pre></td></tr></table></div></figure>


<p>the first two config.vm lines establish the box we want to use for our development VM. Because, initially, this box will NOT be known to Vagrant, it will attempt to reach out to that <a href="https://atlas.hashicorp.com/boxes/search">Atlas</a> site and download it. The next three lines define the machine’s hostname, the network type, and the IP address for this VM. In this case, I’m using a private network and giving it an IP address on a made-up 172.31.0.0/24 subnet (feel free to use your own private IP range as long as it doesn’t conflict with anything). The next line is forwarding port 80 on the VM to port 8084 on my local laptop – this allows you to test out web services by simply navigating to <a href="http://localhost:8084">http://localhost:8084</a> from your web browser. I’ll save explaining the last line for the next section.</p>

<p>NOTE: For more documentation on these settings, <a href="http://docs.vagrantup.com/v1/docs/vagrantfile.html">visit Vagrant’s documentation</a> site as it’s quite good. The post I referred to create my dev environment and the post I am writing has many changes may be because of Vagrant version changes. Please refer to the Vagrant docs in case you are reading in near future.</p>

<h3>Installing virtualbox</h3>

<p>Vagrant needs an underlying provider for it to run, the provider is an application which allows your system to run virtual machine. By default vagrant does comes with VirtualBox but in case yours didn&rsquo;t please feel free to download one from <a href="https://www.virtualbox.org/wiki/Downloads">Virtualbox Download</a> site and install it according to your system.</p>

<h3>Installing virtualbox Guest Additions</h3>

<p>While setting up all this, I did got lots of issue with some or the other feature not working, different OSes threw me different errors. But it is always good to have it installed. We may in further be taking about how to share folders with your virtual machine and the host machine. The Virtualbox tools is to be installed on to the Virtual Machine only. So, you may need to do it once box is created. Its an ISO image and can be downloaded from the <a href="http://download.virtualbox.org/">Virtualbox page</a></p>

<p>or you can just do.</p>

<pre><code>vagrant plugin install vagrant-vbguest
</code></pre>

<h3>Getting started with puppet on your VM.</h3>

<p>The final line of the <code>Vagrantfile</code> runs the &lsquo;Shell Provisioner&rsquo; for vagrant. Essentially, this runs a shell script on the VM once its been booted and configured.</p>

<figure class='code'><figcaption><span> (centos_7_x.sh)</span> <a href='/downloads/code/vagrant/centos_7_x.sh'>download</a></figcaption>
<div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
<span class='line-number'>3</span>
<span class='line-number'>4</span>
<span class='line-number'>5</span>
<span class='line-number'>6</span>
<span class='line-number'>7</span>
<span class='line-number'>8</span>
<span class='line-number'>9</span>
<span class='line-number'>10</span>
<span class='line-number'>11</span>
<span class='line-number'>12</span>
<span class='line-number'>13</span>
<span class='line-number'>14</span>
<span class='line-number'>15</span>
<span class='line-number'>16</span>
<span class='line-number'>17</span>
<span class='line-number'>18</span>
<span class='line-number'>19</span>
<span class='line-number'>20</span>
<span class='line-number'>21</span>
<span class='line-number'>22</span>
<span class='line-number'>23</span>
<span class='line-number'>24</span>
<span class='line-number'>25</span>
<span class='line-number'>26</span>
<span class='line-number'>27</span>
</pre></td><td class='code'><pre><code class='sh'><span class='line'><span class="nb">set</span> -e
</span><span class='line'>
</span><span class='line'><span class="nv">REPO_URL</span><span class="o">=</span><span class="s2">&quot;http://yum.puppetlabs.com/el/6/products/i386/puppetlabs-release-6-11.noarch.rpm&quot;</span>
</span><span class='line'>
</span><span class='line'><span class="k">if</span> <span class="o">[</span><span class="s2">&quot;$EUID&quot;</span> -ne <span class="s2">&quot;0&quot;</span><span class="o">]</span><span class="p">;</span> <span class="k">then</span>
</span><span class='line'>    <span class="nb">echo</span> <span class="s2">&quot;This script should be run as root&quot;</span> &gt;<span class="p">&amp;</span>2
</span><span class='line'>    <span class="nb">exit </span>1
</span><span class='line'><span class="k">fi</span>
</span><span class='line'>
</span><span class='line'><span class="k">if</span> which puppet &gt; /dev/null 2&gt;<span class="p">&amp;</span>1<span class="p">;</span> <span class="k">then</span>
</span><span class='line'>    <span class="nb">echo</span> <span class="s2">&quot;Puppet already installed&quot;</span>
</span><span class='line'>    <span class="nb">exit </span>0
</span><span class='line'><span class="k">fi</span>
</span><span class='line'>
</span><span class='line'>
</span><span class='line'>
</span><span class='line'><span class="c"># Install puppet labs repo</span>
</span><span class='line'><span class="nb">echo</span> <span class="s2">&quot;configuring puppetlabs repo..&quot;</span>
</span><span class='line'><span class="nv">repo_path</span> <span class="o">=</span><span class="k">$(</span>mktemp<span class="k">)</span>
</span><span class='line'>wget --output-document<span class="o">=</span><span class="k">${</span><span class="nv">repo_path</span><span class="k">}</span> <span class="k">${</span><span class="nv">REPO_URL</span><span class="k">}</span> 2&gt;/dev/null
</span><span class='line'>rpm -i <span class="k">${</span><span class="nv">repo_path</span><span class="k">}</span> &gt; /dev/null
</span><span class='line'>
</span><span class='line'><span class="c"># Install puppet..</span>
</span><span class='line'><span class="nb">echo</span> <span class="s2">&quot;installing puppet&quot;</span>
</span><span class='line'>yum install -y puppet &gt; /dev/null
</span><span class='line'>
</span><span class='line'><span class="nb">echo</span> <span class="s2">&quot;Puppet installed!!&quot;</span>
</span></code></pre></td></tr></table></div></figure>


<p>With this script, I setup the puppetlabs el7 repo containing the current package for Puppet/Facter/Hiera/PuppetDB and install the most recent version of puppet and facter present in the repository. This will ensure you get the latest version of puppet, and you don&rsquo;t need to worry about creating a new box everytime, puppet releases a new verion.</p>

<p>This code is from <a href="https://github.com/hashicorp/puppet-bootstrap/blob/master/centos_6_x.sh">Mitchell&rsquo;s puppet bootstrap repo</a>. This code is working for me, but keep checking the repo for any updates. If you maintaining your <strong>own</strong> provisioning script, consider filling a pull request so we can take the benefit from good-code.</p>

<h3>Action time</h3>

<p>Once the <code>Vagrantfile</code> is created the next logical thing is to start the VM and test out vagrant.</p>

<figure class='code'><figcaption><span></span></figcaption><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
<span class='line-number'>3</span>
<span class='line-number'>4</span>
<span class='line-number'>5</span>
<span class='line-number'>6</span>
<span class='line-number'>7</span>
<span class='line-number'>8</span>
<span class='line-number'>9</span>
</pre></td><td class='code'><pre><code class='sh'><span class='line'><span class="nv">$ </span>vagrant status
</span><span class='line'>Current machine states:
</span><span class='line'>
</span><span class='line'>default                   not created <span class="o">(</span>virtualbox<span class="o">)</span>
</span><span class='line'>
</span><span class='line'>The environment has not yet been created. Run <span class="sb">`</span>vagrant up<span class="sb">`</span> to
</span><span class='line'>create the environment. If a machine is not created, only the
</span><span class='line'>default provider will be shown. So <span class="k">if</span> a provider is not listed,
</span><span class='line'><span class="k">then</span> the machine is not created <span class="k">for</span> that environment.
</span></code></pre></td></tr></table></div></figure>


<p>Good, so there is no VM created, so lets create one by starting vagrant.</p>

<figure class='code'><figcaption><span></span></figcaption><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
<span class='line-number'>3</span>
<span class='line-number'>4</span>
<span class='line-number'>5</span>
<span class='line-number'>6</span>
<span class='line-number'>7</span>
<span class='line-number'>8</span>
<span class='line-number'>9</span>
<span class='line-number'>10</span>
<span class='line-number'>11</span>
<span class='line-number'>12</span>
<span class='line-number'>13</span>
<span class='line-number'>14</span>
<span class='line-number'>15</span>
<span class='line-number'>16</span>
<span class='line-number'>17</span>
<span class='line-number'>18</span>
<span class='line-number'>19</span>
<span class='line-number'>20</span>
<span class='line-number'>21</span>
<span class='line-number'>22</span>
</pre></td><td class='code'><pre><code class='sh'><span class='line'><span class="nv">$ </span>vagrant up
</span><span class='line'>Bringing machine <span class="s1">&#39;default&#39;</span> up with <span class="s1">&#39;virtualbox&#39;</span> provider...
</span><span class='line'><span class="o">==</span>&gt; default: Importing base box <span class="s1">&#39;centos/7&#39;</span>...
</span><span class='line'><span class="o">==</span>&gt; default: Matching MAC address <span class="k">for</span> NAT networking...
</span><span class='line'><span class="o">==</span>&gt; default: Checking <span class="k">if</span> box <span class="s1">&#39;centos/7&#39;</span> is up to date...
</span><span class='line'><span class="o">==</span>&gt; default: Setting the name of the VM: <span class="nv">octopressnotes_default_1461604478526_97058</span>
</span><span class='line'><span class="o">==</span>&gt; default: Clearing any previously <span class="nb">set </span>network interfaces...
</span><span class='line'><span class="o">==</span>&gt; default: Preparing network interfaces based on configuration...
</span><span class='line'>    default: Adapter 1: nat
</span><span class='line'>    default: Adapter 2: <span class="nv">hostonly</span>
</span><span class='line'><span class="o">==</span>&gt; default: Forwarding ports...
</span><span class='line'>    default: <span class="m">80</span> <span class="o">(</span>guest<span class="o">)</span> <span class="o">=</span>&gt; <span class="m">8084</span> <span class="o">(</span>host<span class="o">)</span> <span class="o">(</span>adapter 1<span class="o">)</span>
</span><span class='line'>    default: <span class="m">22</span> <span class="o">(</span>guest<span class="o">)</span> <span class="o">=</span>&gt; <span class="m">2222</span> <span class="o">(</span>host<span class="o">)</span> <span class="o">(</span>adapter 1<span class="o">)</span>
</span><span class='line'><span class="o">==</span>&gt; default: Booting VM...
</span><span class='line'><span class="o">==</span>&gt; default: Waiting <span class="k">for</span> machine to boot. This may take a few minutes...
</span><span class='line'><span class="o">==</span>&gt; default: Machine booted and ready!
</span><span class='line'><span class="o">==</span>&gt; default: Checking <span class="k">for</span> guest additions in VM...
</span><span class='line'><span class="o">==</span>&gt; default: Setting hostname...
</span><span class='line'><span class="o">==</span>&gt; default: Configuring and enabling network interfaces...
</span><span class='line'><span class="o">==</span>&gt; default: Mounting shared folders...
</span><span class='line'><span class="o">==</span>&gt; default: Machine already provisioned. Run <span class="sb">`</span>vagrant provision<span class="sb">`</span> or use the <span class="sb">`</span>--provision<span class="sb">`</span>
</span><span class='line'><span class="o">==</span>&gt; default: flag to force provisioning. Provisioners marked to run always will still run.
</span></code></pre></td></tr></table></div></figure>


<p>Vagrant first noticed and checked for the centos/7 box locally, since I already have the box added into my Vagrant it didn&rsquo;t redownload it but used the same box to create a custom VM, if the machine is not present locally, Vagrant will download the box from hashicorp site. Next Vagrant moves to configuring the hostname and the network as per our Vagrantfile, and Lastly it runs the script it for provisioning the VM.</p>

<p>We have got the VM with puppet installed. Let&rsquo;s login to the VM and check the puppet version.</p>

<figure class='code'><figcaption><span></span></figcaption><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
<span class='line-number'>3</span>
<span class='line-number'>4</span>
<span class='line-number'>5</span>
<span class='line-number'>6</span>
<span class='line-number'>7</span>
<span class='line-number'>8</span>
<span class='line-number'>9</span>
<span class='line-number'>10</span>
</pre></td><td class='code'><pre><code class='sh'><span class='line'><span class="nv">$ </span>vagrant ssh
</span><span class='line'>
</span><span class='line'>Last login: Wed Apr <span class="m">13</span> 13:11:28 <span class="m">2016</span> from 10.0.2.2
</span><span class='line'><span class="o">[</span>vagrant@development ~<span class="o">]</span><span class="nv">$ </span>puppet --version
</span><span class='line'>3.8.6
</span><span class='line'><span class="o">[</span>vagrant@development ~<span class="o">]</span><span class="nv">$ </span>hostname
</span><span class='line'>development.puppetlabs.vm
</span><span class='line'><span class="o">[</span>vagrant@development ~<span class="o">]</span><span class="nv">$ </span><span class="nb">exit</span>
</span><span class='line'><span class="nb">logout</span>
</span><span class='line'>Connection to 127.0.0.1 closed.
</span></code></pre></td></tr></table></div></figure>


<p>So now we know how to SSH into the VM, check the Puppet version, check the hostname to check we are on the correct host. Now we go ahead and confiure puppet to do something with this machine.</p>

<h3>Working with puppet</h3>

<p>Now we have got a clean VM, and were able to set up as well, the purpose of this doc was to set up a puppet development environment using vagrant. For writing puppet modules, <a href="http://www.amazon.com/Puppet-Cookbook-Third-Thomas-Uphill/dp/1784394882/ref=sr_1_1?ie=UTF8&amp;qid=1461809235&amp;sr=8-1&amp;keywords=puppet+cookbook">puppet cookbook</a> is a good beginning point.</p>

<p>More on putting things in order and avoid messing up.</p>

<p>I Locally use git to be for version controlling and source code management, with time to time push to remote. Use Github for storing repositories remotely.</p>

<p>My final Vagrantfile contains as below.</p>

<figure class='code'><figcaption><span>Vagrantfile</span></figcaption><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
<span class='line-number'>3</span>
<span class='line-number'>4</span>
<span class='line-number'>5</span>
<span class='line-number'>6</span>
<span class='line-number'>7</span>
<span class='line-number'>8</span>
<span class='line-number'>9</span>
<span class='line-number'>10</span>
<span class='line-number'>11</span>
<span class='line-number'>12</span>
<span class='line-number'>13</span>
<span class='line-number'>14</span>
<span class='line-number'>15</span>
<span class='line-number'>16</span>
<span class='line-number'>17</span>
</pre></td><td class='code'><pre><code class='ruby'><span class='line'><span class="no">Vagrant</span><span class="o">.</span><span class="n">configure</span><span class="p">(</span><span class="mi">2</span><span class="p">)</span> <span class="k">do</span> <span class="o">|</span><span class="n">config</span><span class="o">|</span>
</span><span class='line'>  <span class="n">config</span><span class="o">.</span><span class="n">vm</span><span class="o">.</span><span class="n">box</span> <span class="o">=</span> <span class="s2">&quot;dev-env&quot;</span>
</span><span class='line'>  <span class="n">config</span><span class="o">.</span><span class="n">vm</span><span class="o">.</span><span class="n">hostname</span> <span class="o">=</span> <span class="s2">&quot;development.puppetlabs.vm&quot;</span>
</span><span class='line'>  <span class="n">config</span><span class="o">.</span><span class="n">vm</span><span class="o">.</span><span class="n">network</span> <span class="s2">&quot;private_network&quot;</span><span class="p">,</span> <span class="ss">ip</span><span class="p">:</span> <span class="s2">&quot;172.31.0.202&quot;</span>
</span><span class='line'>  <span class="n">config</span><span class="o">.</span><span class="n">vm</span><span class="o">.</span><span class="n">network</span> <span class="s2">&quot;forwarded_port&quot;</span><span class="p">,</span> <span class="ss">guest</span><span class="p">:</span> <span class="mi">80</span><span class="p">,</span> <span class="ss">host</span><span class="p">:</span> <span class="mi">8084</span>
</span><span class='line'>  <span class="n">config</span><span class="o">.</span><span class="n">vm</span><span class="o">.</span><span class="n">provision</span> <span class="ss">:shell</span><span class="p">,</span> <span class="ss">:path</span> <span class="o">=&gt;</span> <span class="s2">&quot;centos_7_x.sh&quot;</span>
</span><span class='line'>
</span><span class='line'>  <span class="c1"># Puppet shared folder</span>
</span><span class='line'>  <span class="n">config</span><span class="o">.</span><span class="n">vm</span><span class="o">.</span><span class="n">synced_folder</span> <span class="s2">&quot;puppet&quot;</span><span class="p">,</span> <span class="s2">&quot;/puppet&quot;</span>
</span><span class='line'>
</span><span class='line'>  <span class="c1">#puppet provision setup</span>
</span><span class='line'>  <span class="n">config</span><span class="o">.</span><span class="n">vm</span><span class="o">.</span><span class="n">provision</span> <span class="ss">:puppet</span> <span class="k">do</span> <span class="o">|</span><span class="n">puppet</span><span class="o">|</span>
</span><span class='line'>    <span class="n">puppet</span><span class="o">.</span><span class="n">manifests_path</span> <span class="o">=</span> <span class="s2">&quot;puppet/manifests&quot;</span>
</span><span class='line'>    <span class="n">puppet</span><span class="o">.</span><span class="n">module_path</span> <span class="o">=</span> <span class="s2">&quot;puppet/modules&quot;</span>
</span><span class='line'>    <span class="n">puppet</span><span class="o">.</span><span class="n">manifest_file</span> <span class="o">=</span> <span class="s2">&quot;site.pp&quot;</span>
</span><span class='line'>  <span class="k">end</span>
</span><span class='line'><span class="k">end</span>
</span></code></pre></td></tr></table></div></figure>


<p>I ensured to share my local dir with my vagrant machine, so that my download modules can be directly available to the vagrant machine for work.</p>
</div>
  
  


    </article>
  
  
    <article>
      
  <header>
    
      <h1 class="entry-title"><a href="/blog/2016/04/24/howto-tweet-new-posts-in-octopress/">Tweet Posts With Octopress</a></h1>
    
    
      <p class="meta">
        




<time class='entry-date' datetime='2016-04-24T08:19:20+05:30'><span class='date'><span class='date-month'>Apr</span> <span class='date-day'>24</span><span class='date-suffix'>th</span>, <span class='date-year'>2016</span></span> <span class='time'>8:19 am</span></time>
        
         | <a href="/blog/2016/04/24/howto-tweet-new-posts-in-octopress/#disqus_thread">Comments</a>
        
        
      </p>
    
  </header>


  <div class="entry-content"><p>Thanks to the <a href="http://fusion94.org/blog/2013/01/13/howto-tweet-new-posts-in-octopress/">blog post</a> by <a href="http://fusion94.org">Tony Guntharp</a> who got inspired from another blog post by <a href="http://blog.prydoni.us">Adnan Abdulhussein</a> on how to integrate twitter posting with <a href="http://octopress.org">Octopress</a>. His post was some 3 Years old and the <a href="https://github.com/sferik/twitter">twitter gem</a> for <a href="http://octopress.org">Octopress</a> version <code>5.16.0</code> has gone through a lot of changes, So technically I did some rewrite into the ruby configuration code and fixed it so I can post the tweets with the latest twitter gem.</p>

<p>The basic idea remains the same taken from the predecessors blogs, you create a post and print the tweet message you want to give and it create a link to the post in the tweet_queue file. When the <code>rake deploy</code> task is called, it reads from the <strong>tweet_queue</strong> file and tweets what&rsquo;s in their line by line. This way you can create multiple posts at a time, and they all will be tweeted when you run your <code>rake deploy</code> task for your blog.</p>

<h3>Create a twitter application.</h3>

<p>A twitter application is must to post to <a href="http://www.twitter.com">twitter</a>. Head over to <a href="https://apps.twitter.com/app/new,">https://apps.twitter.com/app/new,</a> sign in and create a new application for your blog.</p>

<p>In <em>settings</em>: ensure <em>read</em> and <em>write</em> is <strong>enabled</strong>.</p>

<p>In <em>Keys and access tokens</em>: take note of the following details.</p>

<ul>
<li>Consumer Keys</li>
<li>Consumer Secret</li>
<li>Access Token</li>
<li>Access Token Secret</li>
</ul>


<h3>Install the gem</h3>

<p>We&rsquo;ll be using the <a href="https://github.com/sferik/twitter">twitter gem</a> to update the status. Put the below line in your development <code>Gemfile</code></p>

<pre><code>gem twitter
</code></pre>

<p>from the terminal run <code>bundle install</code></p>

<h3>Configure Octopress to use twitter gem</h3>

<p>Open the <code>Rakefile</code> in your favorite editor and add the below near the top with other required in the <code>Rakefile</code>.</p>

<pre><code>require twitter
</code></pre>

<p>Add the following lines after the <code>server_port</code> line</p>

<figure class='code'><figcaption><span>Twitter Configuration</span></figcaption><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
<span class='line-number'>3</span>
<span class='line-number'>4</span>
<span class='line-number'>5</span>
<span class='line-number'>6</span>
<span class='line-number'>7</span>
<span class='line-number'>8</span>
<span class='line-number'>9</span>
<span class='line-number'>10</span>
</pre></td><td class='code'><pre><code class='ruby'><span class='line'><span class="c1"># Twitter config (for tweeting posts)</span>
</span><span class='line'><span class="n">client</span> <span class="o">=</span> <span class="no">Twitter</span><span class="o">::</span><span class="no">REST</span><span class="o">::</span><span class="no">Client</span><span class="o">.</span><span class="n">new</span> <span class="k">do</span> <span class="o">|</span><span class="n">config</span><span class="o">|</span>
</span><span class='line'>  <span class="n">config</span><span class="o">.</span><span class="n">consumer_key</span> <span class="o">=</span> <span class="s2">&quot;YOUR_CONSUMER_KEY&quot;</span>
</span><span class='line'>  <span class="n">config</span><span class="o">.</span><span class="n">consumer_secret</span> <span class="o">=</span> <span class="s2">&quot;YOUR_CONSUMER_SECRET&quot;</span>
</span><span class='line'>  <span class="n">config</span><span class="o">.</span><span class="n">access_token</span> <span class="o">=</span> <span class="s2">&quot;YOUR_ACCESS_TOKEN&quot;&quot;</span>
</span><span class='line'><span class="s2">  config.access_token_secret = &quot;</span><span class="no">YOUR_ACCESS_TOKEN_SECRET</span>
</span><span class='line'><span class="k">end</span>
</span><span class='line'>
</span><span class='line'><span class="c1"># MAKE SURE THERE IS A TRAILING SLASH, otherwise the linking won&#39;t work</span>
</span><span class='line'><span class="n">blog_url</span> <span class="o">=</span> <span class="s2">&quot;YOUR_BLOG_URL/&quot;</span>
</span></code></pre></td></tr></table></div></figure>


<p>ensure the trailing slash(/), It is required to append the date-name combination of the posts to form the url of the post.</p>

<h3>Modify the new_post rake task</h3>

<p>Search for <code>:new_post</code> rake task in the <code>Rakefile</code> and replace the task with the following.</p>

<figure class='code'><figcaption><span>Modifying new_post task</span></figcaption><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
<span class='line-number'>3</span>
<span class='line-number'>4</span>
<span class='line-number'>5</span>
<span class='line-number'>6</span>
<span class='line-number'>7</span>
<span class='line-number'>8</span>
<span class='line-number'>9</span>
<span class='line-number'>10</span>
<span class='line-number'>11</span>
<span class='line-number'>12</span>
<span class='line-number'>13</span>
<span class='line-number'>14</span>
<span class='line-number'>15</span>
<span class='line-number'>16</span>
<span class='line-number'>17</span>
<span class='line-number'>18</span>
<span class='line-number'>19</span>
<span class='line-number'>20</span>
<span class='line-number'>21</span>
<span class='line-number'>22</span>
<span class='line-number'>23</span>
<span class='line-number'>24</span>
<span class='line-number'>25</span>
<span class='line-number'>26</span>
<span class='line-number'>27</span>
<span class='line-number'>28</span>
<span class='line-number'>29</span>
<span class='line-number'>30</span>
</pre></td><td class='code'><pre><code class='ruby'><span class='line'><span class="c1"># usage rake new_post[my-new-post] or rake new_post[&#39;my new post&#39;] or rake new_post (defaults to &quot;new-post&quot;)</span>
</span><span class='line'><span class="n">desc</span> <span class="s2">&quot;Begin a new post in </span><span class="si">#{</span><span class="n">source_dir</span><span class="si">}</span><span class="s2">/</span><span class="si">#{</span><span class="n">posts_dir</span><span class="si">}</span><span class="s2">&quot;</span>
</span><span class='line'><span class="n">task</span> <span class="ss">:new_post</span><span class="p">,</span> <span class="ss">:title</span><span class="p">,</span> <span class="ss">:tweet</span> <span class="k">do</span> <span class="o">|</span><span class="n">t</span><span class="p">,</span> <span class="n">args</span><span class="o">|</span>
</span><span class='line'>  <span class="k">raise</span> <span class="s2">&quot;### You haven&#39;t set anything up yet. First run `rake install` to set up an Octopress theme.&quot;</span> <span class="k">unless</span> <span class="no">File</span><span class="o">.</span><span class="n">directory?</span><span class="p">(</span><span class="n">source_dir</span><span class="p">)</span>
</span><span class='line'>  <span class="n">mkdir_p</span> <span class="s2">&quot;</span><span class="si">#{</span><span class="n">source_dir</span><span class="si">}</span><span class="s2">/</span><span class="si">#{</span><span class="n">posts_dir</span><span class="si">}</span><span class="s2">&quot;</span>
</span><span class='line'>  <span class="n">args</span><span class="o">.</span><span class="n">with_defaults</span><span class="p">(</span><span class="ss">:title</span> <span class="o">=&gt;</span> <span class="s1">&#39;new-post&#39;</span><span class="p">,</span> <span class="ss">:tweet</span> <span class="o">=&gt;</span> <span class="s1">&#39;&#39;</span><span class="p">)</span>
</span><span class='line'>  <span class="n">title</span> <span class="o">=</span> <span class="n">args</span><span class="o">.</span><span class="n">title</span>
</span><span class='line'>  <span class="n">filename</span> <span class="o">=</span> <span class="s2">&quot;</span><span class="si">#{</span><span class="n">source_dir</span><span class="si">}</span><span class="s2">/</span><span class="si">#{</span><span class="n">posts_dir</span><span class="si">}</span><span class="s2">/</span><span class="si">#{</span><span class="no">Time</span><span class="o">.</span><span class="n">now</span><span class="o">.</span><span class="n">strftime</span><span class="p">(</span><span class="s1">&#39;%Y-%m-%d&#39;</span><span class="p">)</span><span class="si">}</span><span class="s2">-</span><span class="si">#{</span><span class="n">title</span><span class="o">.</span><span class="n">to_url</span><span class="si">}</span><span class="s2">.</span><span class="si">#{</span><span class="n">new_post_ext</span><span class="si">}</span><span class="s2">&quot;</span>
</span><span class='line'>  <span class="k">if</span> <span class="no">File</span><span class="o">.</span><span class="n">exist?</span><span class="p">(</span><span class="n">filename</span><span class="p">)</span>
</span><span class='line'>    <span class="nb">abort</span><span class="p">(</span><span class="s2">&quot;rake aborted!&quot;</span><span class="p">)</span> <span class="k">if</span> <span class="n">ask</span><span class="p">(</span><span class="s2">&quot;</span><span class="si">#{</span><span class="n">filename</span><span class="si">}</span><span class="s2"> already exists. Do you want to overwrite?&quot;</span><span class="p">,</span> <span class="o">[</span><span class="s1">&#39;y&#39;</span><span class="p">,</span> <span class="s1">&#39;n&#39;</span><span class="o">]</span><span class="p">)</span> <span class="o">==</span> <span class="s1">&#39;n&#39;</span>
</span><span class='line'>  <span class="k">end</span>
</span><span class='line'>  <span class="nb">puts</span> <span class="s2">&quot;Creating new post: </span><span class="si">#{</span><span class="n">filename</span><span class="si">}</span><span class="s2">&quot;</span>
</span><span class='line'>  <span class="nb">open</span><span class="p">(</span><span class="n">filename</span><span class="p">,</span> <span class="s1">&#39;w&#39;</span><span class="p">)</span> <span class="k">do</span> <span class="o">|</span><span class="n">post</span><span class="o">|</span>
</span><span class='line'>    <span class="n">post</span><span class="o">.</span><span class="n">puts</span> <span class="s2">&quot;---&quot;</span>
</span><span class='line'>    <span class="n">post</span><span class="o">.</span><span class="n">puts</span> <span class="s2">&quot;layout: post&quot;</span>
</span><span class='line'>    <span class="n">post</span><span class="o">.</span><span class="n">puts</span> <span class="s2">&quot;title: </span><span class="se">\&quot;</span><span class="si">#{</span><span class="n">title</span><span class="o">.</span><span class="n">gsub</span><span class="p">(</span><span class="sr">/&amp;/</span><span class="p">,</span><span class="s1">&#39;&amp;amp;&#39;</span><span class="p">)</span><span class="si">}</span><span class="se">\&quot;</span><span class="s2">&quot;</span>
</span><span class='line'>    <span class="n">post</span><span class="o">.</span><span class="n">puts</span> <span class="s2">&quot;date: </span><span class="si">#{</span><span class="no">Time</span><span class="o">.</span><span class="n">now</span><span class="o">.</span><span class="n">strftime</span><span class="p">(</span><span class="s1">&#39;%Y-%m-%d %H:%M&#39;</span><span class="p">)</span><span class="si">}</span><span class="s2">&quot;</span>
</span><span class='line'>    <span class="n">post</span><span class="o">.</span><span class="n">puts</span> <span class="s2">&quot;comments: true&quot;</span>
</span><span class='line'>    <span class="n">post</span><span class="o">.</span><span class="n">puts</span> <span class="s2">&quot;categories: &quot;</span>
</span><span class='line'>    <span class="n">post</span><span class="o">.</span><span class="n">puts</span> <span class="s2">&quot;---&quot;</span>
</span><span class='line'>  <span class="k">end</span>
</span><span class='line'>  <span class="n">tweet</span> <span class="o">=</span> <span class="n">args</span><span class="o">.</span><span class="n">tweet</span>
</span><span class='line'>  <span class="k">if</span> <span class="ow">not</span> <span class="n">tweet</span> <span class="o">==</span> <span class="s1">&#39;&#39;</span>
</span><span class='line'>    <span class="c1"># add to twitter status queue</span>
</span><span class='line'>    <span class="nb">puts</span> <span class="s1">&#39;Adding post to tweet queue, it will be tweeted after deploying.&#39;</span>
</span><span class='line'>    <span class="nb">open</span><span class="p">(</span><span class="s1">&#39;tweet_queue&#39;</span><span class="p">,</span> <span class="s1">&#39;a&#39;</span><span class="p">)</span> <span class="k">do</span> <span class="o">|</span><span class="n">file</span><span class="o">|</span>
</span><span class='line'>      <span class="n">file</span><span class="o">.</span><span class="n">puts</span> <span class="s2">&quot;</span><span class="si">#{</span><span class="n">tweet</span><span class="si">}</span><span class="s2"> - </span><span class="si">#{</span><span class="n">blog_url</span><span class="si">}#{</span><span class="no">Time</span><span class="o">.</span><span class="n">now</span><span class="o">.</span><span class="n">strftime</span><span class="p">(</span><span class="s1">&#39;%Y/%m/%d&#39;</span><span class="p">)</span><span class="si">}</span><span class="s2">/</span><span class="si">#{</span><span class="n">title</span><span class="o">.</span><span class="n">to_url</span><span class="si">}</span><span class="s2">/&quot;</span>
</span><span class='line'>    <span class="k">end</span>
</span><span class='line'>  <span class="k">end</span>
</span><span class='line'><span class="k">end</span>
</span></code></pre></td></tr></table></div></figure>


<p>If you already have a modified task, the only changes are the task declaration <code>(task :new_post, :title, :tweet do |t, args|)</code> and the last few lines starting with <code>tweet = args.tweet</code>.</p>

<h3>Setup to post tweets on deploy</h3>

<p>Look for the <code>deplpoy_task</code> in the <code>Rakefile</code> and change or replace the files accordingly.</p>

<figure class='code'><figcaption><span>Deploy task</span></figcaption><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
<span class='line-number'>3</span>
<span class='line-number'>4</span>
<span class='line-number'>5</span>
<span class='line-number'>6</span>
<span class='line-number'>7</span>
<span class='line-number'>8</span>
<span class='line-number'>9</span>
<span class='line-number'>10</span>
<span class='line-number'>11</span>
<span class='line-number'>12</span>
<span class='line-number'>13</span>
<span class='line-number'>14</span>
<span class='line-number'>15</span>
<span class='line-number'>16</span>
<span class='line-number'>17</span>
<span class='line-number'>18</span>
<span class='line-number'>19</span>
<span class='line-number'>20</span>
<span class='line-number'>21</span>
<span class='line-number'>22</span>
<span class='line-number'>23</span>
<span class='line-number'>24</span>
</pre></td><td class='code'><pre><code class='ruby'><span class='line'><span class="n">desc</span> <span class="s2">&quot;Default deploy task&quot;</span>
</span><span class='line'><span class="n">task</span> <span class="ss">:deploy</span> <span class="k">do</span>
</span><span class='line'>  <span class="c1"># Check if preview posts exist, which should not be published</span>
</span><span class='line'>  <span class="k">if</span> <span class="no">File</span><span class="o">.</span><span class="n">exists?</span><span class="p">(</span><span class="s2">&quot;.preview-mode&quot;</span><span class="p">)</span>
</span><span class='line'>    <span class="nb">puts</span> <span class="s2">&quot;## Found posts in preview mode, regenerating files ...&quot;</span>
</span><span class='line'>    <span class="no">File</span><span class="o">.</span><span class="n">delete</span><span class="p">(</span><span class="s2">&quot;.preview-mode&quot;</span><span class="p">)</span>
</span><span class='line'>    <span class="no">Rake</span><span class="o">::</span><span class="no">Task</span><span class="o">[</span><span class="ss">:generate</span><span class="o">].</span><span class="n">execute</span>
</span><span class='line'>  <span class="k">end</span>
</span><span class='line'>
</span><span class='line'>  <span class="no">Rake</span><span class="o">::</span><span class="no">Task</span><span class="o">[</span><span class="ss">:copydot</span><span class="o">].</span><span class="n">invoke</span><span class="p">(</span><span class="n">source_dir</span><span class="p">,</span> <span class="n">public_dir</span><span class="p">)</span>
</span><span class='line'>  <span class="no">Rake</span><span class="o">::</span><span class="no">Task</span><span class="o">[</span><span class="s2">&quot;</span><span class="si">#{</span><span class="n">deploy_default</span><span class="si">}</span><span class="s2">&quot;</span><span class="o">].</span><span class="n">execute</span>
</span><span class='line'>
</span><span class='line'>  <span class="c1"># Tweet</span>
</span><span class='line'>  <span class="k">next</span> <span class="k">if</span> <span class="ow">not</span> <span class="no">File</span><span class="o">.</span><span class="n">exists?</span> <span class="s1">&#39;tweet_queue&#39;</span>
</span><span class='line'>  <span class="nb">puts</span> <span class="s2">&quot;Tweeting...&quot;</span>
</span><span class='line'>  <span class="nb">open</span><span class="p">(</span><span class="s1">&#39;tweet_queue&#39;</span><span class="p">,</span> <span class="s1">&#39;r&#39;</span><span class="p">)</span> <span class="k">do</span> <span class="o">|</span><span class="n">file</span><span class="o">|</span>
</span><span class='line'>    <span class="k">while</span> <span class="p">(</span><span class="n">line</span> <span class="o">=</span> <span class="n">file</span><span class="o">.</span><span class="n">gets</span><span class="p">)</span>
</span><span class='line'>      <span class="nb">puts</span> <span class="s2">&quot;Tweeting &#39;</span><span class="si">#{</span><span class="n">line</span><span class="o">.</span><span class="n">gsub</span><span class="p">(</span><span class="s2">&quot;</span><span class="se">\n</span><span class="s2">&quot;</span><span class="p">,</span> <span class="s2">&quot;&quot;</span><span class="p">)</span><span class="si">}</span><span class="s2">&#39; for @</span><span class="si">#{</span><span class="n">client</span><span class="o">.</span><span class="n">current_user</span><span class="o">.</span><span class="n">screen_name</span><span class="si">}</span><span class="s2">...&quot;</span>
</span><span class='line'>      <span class="n">client</span><span class="o">.</span><span class="n">update</span><span class="p">(</span><span class="n">line</span><span class="p">)</span>
</span><span class='line'>    <span class="k">end</span>
</span><span class='line'>  <span class="k">end</span>
</span><span class='line'>  <span class="nb">puts</span> <span class="s2">&quot;Deleting queue...&quot;</span>
</span><span class='line'>  <span class="n">rm</span> <span class="s1">&#39;tweet_queue&#39;</span>
</span><span class='line'><span class="k">end</span>
</span></code></pre></td></tr></table></div></figure>


<p>or just add the <code>#Tweet</code> task in deploy task.</p>

<h3>Usage</h3>

<p>Now while creating your <code>new_post</code> you need to specify a separate message for the tweet when you create a post. This is the best way to give you the option of choosing whether you want to tweet the post or not. It also allows you to add @’s and #’s to the tweet message separately from the post title.</p>

<p>For Example:</p>

<p>The first part is the URL, and the second part is your tweet message.</p>

<pre><code>rake new_post["HowTo Tweet New Posts in Octopress","HowTo Tweet New Posts in Octopress @twitter"]
</code></pre>

<p>You should be able to see your new post generated by the rake task.</p>

<p>Once, this is done. Go Ahead and write into your post and <code>rake gen_deploy</code> should do the rest of it.</p>
</div>
  
  


    </article>
  
  
    <article>
      
  <header>
    
      <h1 class="entry-title"><a href="/blog/2016/04/23/working-with-octopress/">Working With Octopress</a></h1>
    
    
      <p class="meta">
        




<time class='entry-date' datetime='2016-04-23T11:58:21+05:30'><span class='date'><span class='date-month'>Apr</span> <span class='date-day'>23</span><span class='date-suffix'>rd</span>, <span class='date-year'>2016</span></span> <span class='time'>11:58 am</span></time>
        
         | <a href="/blog/2016/04/23/working-with-octopress/#disqus_thread">Comments</a>
        
        
      </p>
    
  </header>


  <div class="entry-content"><h3>Good old saturday.</h3>

<p>Well it is the good old saturday, when I planned to blog about something after around 2 weeks.</p>

<h4>2 Weeks earlier</h4>

<p>Two weeks earlier I sat up, migrated my blog from pelican to octopress keeping the underlying githubpages intact, hardly did I know after two weeks, I will again face the similar problem like with pelican, In anycase this time I was determined not to rework again on migration to a new platform, and Instead I will fix what was missing and will try to resolve the issue with octopress only.</p>

<h4>Today</h4>

<p>My octopress did worked fine without any error, I made some cosmetic changes to the blog and published some post. The problem happened as the blog and the changes did not published, while I am making changes, the <code>rake deploy</code> did worked but I was not able to see anychanges happening to my blog page. But yes, the <code>rake preview</code> did worked fine and I was able to see my changes to localhost. Tried fixing it hard for sometimes but I didn&rsquo;t work.</p>

<p>To make it work, I deleted my github.io repository from github, ran the command <code>rake github_setup_pages</code> pushed the content from my local repository back to github again, and well, after this I was able to see the changes on the web. That&rsquo;s a releif.</p>

<p>Finally, I made some cosmetic changes, write this as my notes on to what happened and how I fixed it. I also need to find out why it failed in the first place, I am assuming I changed my Laptop, that could be a reason, but this I am not convinced by this.</p>
</div>
  
  


    </article>
  
  
    <article>
      
  <header>
    
      <h1 class="entry-title"><a href="/blog/2016/04/04/welcome/">Welcome</a></h1>
    
    
      <p class="meta">
        




<time class='entry-date' datetime='2016-04-04T21:18:01+05:30'><span class='date'><span class='date-month'>Apr</span> <span class='date-day'>4</span><span class='date-suffix'>th</span>, <span class='date-year'>2016</span></span> <span class='time'>9:18 pm</span></time>
        
         | <a href="/blog/2016/04/04/welcome/#disqus_thread">Comments</a>
        
        
      </p>
    
  </header>


  <div class="entry-content"><p>For two years I wanted to write but was figuring out what and how. I think the impossible task was not to figure out, but to sit down and start writing.</p>

<p>Finally, I make my mind and start finishing the stuff which I always wanted to finish. I have tidbits kept in here, which soon will be blogged.</p>

<p>Its not really for anyone but for myself to keep me notes and help me see the progress.</p>

<p>I have done a lot of migration on this blog. From wordpress to octopress to pelican then back to octopress. I think I will stay here with you. Octopress!!</p>

<p>well and its just the beginning, I am glad I do not have a lots of posts to migrate.</p>

<p>Others may soon follow.</p>
</div>
  
  


    </article>
  
  
    <article>
      
  <header>
    
      <h1 class="entry-title"><a href="/blog/2016/04/01/aws-cli/">Using AWS CLI</a></h1>
    
    
      <p class="meta">
        




<time class='entry-date' datetime='2016-04-01'><span class='date'><span class='date-month'>Apr</span> <span class='date-day'>1</span><span class='date-suffix'>st</span>, <span class='date-year'>2016</span></span> <span class='time'>12:00 am</span></time>
        
         | <a href="/blog/2016/04/01/aws-cli/#disqus_thread">Comments</a>
        
        
      </p>
    
  </header>


  <div class="entry-content"><h2>Notes on using aws cli.</h2>

<h3>MY setup.</h3>

<p>I am using arch linux running a 32 bit system, kernel version 4.4.5</p>

<p>I run an aws system on amazon cloud and beleive me i am always kind of get confused with the immense set of tools they have and most of the time with their data centres. I tend to mess up the data centre and have to browse through all the data centres to find where my ec2 instance is running. I finally decided to have a look at how the aws cli works.</p>

<h3>aws-cli tool installation.</h3>

<p>For aws cli installation on arch linux its pretty simple. You can use yaourt to simple download and install it. I would not go much into how to install yaourt and aws through it. I would write about that sometime later, but for now trush google and arch wiki.</p>

<p><code>yaourt aws-cli</code></p>

<p>it will ask a couple of questions, please keep checking and respond accordingly.</p>

<h3>configure the aws-cli</h3>

<p>This is going to be a walk-through and I am doing it right now. Please bear if it look like random notes.</p>

<h3><strong>Sign up for an AWS account.</strong></h3>

<p>Since I am already done with it. Here is the quick guide at amazon, which will help you in registering on for you.</p>

<ol>
<li><p>Open <a href="http://aws.amazon.com/,">http://aws.amazon.com/,</a> and then choose Create an AWS Account.</p>

<p>Follow the online instructions.</p></li>
<li><p>Part of the sign-up procedure involves receiving a phone call and entering a PIN using the phone keypad.</p></li>
</ol>


<p>AWS sends you a confirmation email after the sign-up process is complete. At any time, you can view your current account activity and manage your account by going to <a href="http://aws.amazon.com">http://aws.amazon.com</a> and clicking My Account/Console.</p>

<h4><strong>To get your access key ID and secret access key</strong></h4>

<p>Amazon recommends we create a IAM account key instead of the root aws key, this will let us manage our console securly. I will prefer the IAM account key and here are the steps.</p>

<ol>
<li><p>Open the <a href="https://console.aws.amazon.com/iam/home?#home" title="ACCESS IAM CONSOLE">IAM console</a>.</p></li>
<li><p>In the navigation pane, choose Users.</p></li>
<li><p>Choose your IAM user name (not the check box).</p></li>
<li><p>Choose the Security Credentials tab and then choose Create Access Key.</p></li>
<li><p>To see your access key, choose Show User Security Credentials. Your credentials will look something like this:</p></li>
</ol>


<blockquote><p>Access Key ID: AKIAIOSFODNN7EXAMPLE
Secret Access Key: wJalrXUtnFEMI/K7MDENG/bPxRfiCYEXAMPLEKEY</p></blockquote>

<p>Choose <strong>Download Credentials</strong>, and store the keys in a secure location.</p>

<h4><strong>Configure the CLI</strong></h4>

<ol>
<li><p>This is quite simple</p>

<p> $ aws configure
   AWS Access Key ID [None]: AKIAIOSFODNN7EXAMPLE
   AWS Secret Access Key [None]: wJalrXUtnFEMI/K7MDENG/bPxRfiCYEXAMPLEKEY
   Default region name [None]: us-west-2
   Default output format [None]: ENTER</p></li>
<li><p>Well now its not a lot simple.
The problem is the user which is configured doesn&rsquo;t have access to any policy and without any policy one cannot be able to run commands. I did the basic testing without any policy and well. this is what happened.</p>

<p>  [~ (master)]$ aws ec2 create-security-group &ndash;group-name my-sg &ndash;description &ldquo;My security group&rdquo;</p>

<p>  A client error (UnauthorizedOperation) occurred when calling the CreateSecurityGroup operation: You are not authorized to perform this operation.</p>

<p>  [~ (master)]$ aws ec2 describe-instances &ndash;output table &ndash;region us-west-2</p>

<p>  A client error (UnauthorizedOperation) occurred when calling the DescribeInstances operation: You are not authorized to perform this operation.</p></li>
</ol>


<p>So the smart thing to do is to go back and attach a policy to it.</p>

<p>This is my first time, so without taking time going through the nifty details of what each policy meant. I just attached the <strong>AdministratorAccess</strong> policy.
    {
    &ldquo;Version&rdquo;: &ldquo;2012-10-17&rdquo;,
        &ldquo;Statement&rdquo;: [
            {
        &ldquo;Effect&rdquo;: &ldquo;Allow&rdquo;,
            &ldquo;Action&rdquo;: &ldquo;<em>&rdquo;,
                &ldquo;Resource&rdquo;: &ldquo;</em>&rdquo;
            }
        ]
    }</p>

<p>Now, the commands work like a charm.</p>

<pre><code>[~ (master)]$ aws ec2 create-security-group --group-name omps-sg --description "My security group"
{
    "GroupId": "sg-51146e36"
}

[~ (master)]$ aws ec2 describe-instances --output table --region us-west-2
------------------------------------------------------------------------------------
|                                 DescribeInstances                                |
+----------------------------------------------------------------------------------+
||                                  Reservations                                  ||
|+----------------------------------------+---------------------------------------+|
||  OwnerId                               |  855938437083                         ||
||  ReservationId                         |  r-2ce7c3e9                           ||
|+----------------------------------------+---------------------------------------+|
|||                                   Instances                                  |||
||+------------------------+-----------------------------------------------------+||
|||  AmiLaunchIndex        |  0                                                  |||
|||  Architecture          |  x86_64                                             |||
</code></pre>

<p>and very long output. Trimmed the output to keep the page short.</p>

<p>Thats it.</p>

<p>I would probably write more about IAM Policies later.</p>
</div>
  
  


    </article>
  
  
    <article>
      
  <header>
    
      <h1 class="entry-title"><a href="/blog/2016/01/20/day-10-search-and-replace-using-regex/">Day 10 - Search and Replace Using Regex</a></h1>
    
    
      <p class="meta">
        




<time class='entry-date' datetime='2016-01-20T21:44:31+05:30'><span class='date'><span class='date-month'>Jan</span> <span class='date-day'>20</span><span class='date-suffix'>th</span>, <span class='date-year'>2016</span></span> <span class='time'>9:44 pm</span></time>
        
         | <a href="/blog/2016/01/20/day-10-search-and-replace-using-regex/#disqus_thread">Comments</a>
        
        
      </p>
    
  </header>


  <div class="entry-content"><p>It is important that I am also should be able to search within my text/code when using the editor. Emacs have commands to search for occurrences of a string within the buffer and across the buffers. Emacs has the commands to replace occurrences of a string with a different string. Emacs provides the ability to search multiple files under the control of a tags table or through dired &lsquo;A&rsquo; command , or ask the &lsquo;grep&rsquo; program to do it.</p>

<h2>Incremental Search</h2>

<p>All the searches done in Emacs are &ldquo;incremental&rdquo; in nature i.e. it starts searching as soon as we start typing the first character of the search string. As we start typing emacs shows where the string and as we type further, would be found. We can end our search using RETURN.</p>

<table border="2" cellspacing="0" cellpadding="6" rules="groups" frame="hsides">

<colgroup>
<col  class="left" />

<col  class="left" />

<col  class="left" />
</colgroup>
<thead>
<tr>
<th scope="col" class="left">Keybindings</th>
<th scope="col" class="left">Commands</th>
<th scope="col" class="left">Description</th>
</tr>
</thead>
<tbody>
<tr>
<td class="left">C-s</td>
<td class="left">isearch-forward</td>
<td class="left">Incremental search forward</td>
</tr>

<tr>
<td class="left">C-r</td>
<td class="left">isearch-backward</td>
<td class="left">Incremental search backward</td>
</tr>
</tbody>
</table>


<p></div></p>

<h3>Basic incremental search</h3>

<p>Incremental search starts a forward incremental search. It reads characters from the keyboard, and moves point just past the end of the next occurrence of those characters in the buffer. When you type <code>C-s</code> and then F that puts the cursor after the first &lsquo;F&rsquo; that occurs in the buffer after the starting point then if you type O it moves the cursor to just after the FO. At each step emacs highlights, the &ldquo;current match&rdquo; – the buffer text which matches the string &ndash; using the &lsquo;isearch&rsquo; face. The current search string is also displayed in the echo area. While we made mistake typing the search string, just press <code>&lt;DEL&gt;</code>. Each <code>&lt;DEL&gt;</code> cancels the last character of the search string. Once satified, press <RET> Typing <code>C-a</code> exits the search and moved to the beginning of the line.</p>

<p>As an exception, entering <RET> when the search string is empty launches nonincremental search.</p>

<p>When you exit the search, it add the original value of the point to the mark ring, without activating the mark; use <code>C-u C-&lt;SPC&gt;</code> to return to where you were before the beginning the search.</p>

<p>Use <code>C-r</code> to search backwards. A backward search finds matches that end before the starting point.</p>

<h3>Repeating incremental search</h3>

<p>Suppose you searched for some word &lsquo;FOO&rsquo; and find a match, but its not the one you expected to find, typing C-s again will jump to the next occurence of the word FOO, repeat this any number of time, till you reach the correct instance. If you overshoot(i.e. added more characters to the search string) your search string cancel the same using the <code>&lt;DEL&gt;</code> character, which will delete the last visible character in the search string. When you pause a little after typing your search string, Emacs highlights all the possible matches for the search string. This helps in anticipating how many &lsquo;C-s&rsquo; or &lsquo;C-r&rsquo; you may need to type before you end at the right search. The other matches are highlighted differently than the current match, this can be changes by customizing the face lazy-highlight. This feature can be disabled by setting isearch-lazy-highlight to nil.</p>

<p>Once exited from the search the same string can be used to search again using &lsquo;C-s C-s&rsquo; , the first &lsquo;C-s&rsquo; invokes the search, the second &lsquo;C-s&rsquo; means search again. The similar concepts can be applied while searching backward. While searching forward, you realise, that what you are looking for is before the starting point, you can easily switch with &lsquo;C-r&rsquo;.</p>

<p>To reuse a search string, use the &ldquo;search ring&rdquo;. The commands M-p and &rsquo;M-n' move through the ring to pick a search string to reuse. It leaves the selected search ring element in the minibuffer, which can then be edited. If we just need to edit the current search string in the minibuffer without replaying it with items from the search ring, type &rsquo;M-e', then type <RET>, &lsquo;C-s&rsquo; or &lsquo;C-r&rsquo; to finish editing and search for the string.</p>

<h3>Erros while incremental search</h3>

<p>After typing the search string and if the search string is not found in the buffer, the echo area will say Failing I-Search, and the cursor moves to the place where Emacs found as much of your string as it could. Thus, if you search for &lsquo;FOOT&rsquo; and there is no &lsquo;FOOT&rsquo; in the buffer, then the cursor would be placed after &lsquo;FOO&rsquo; in &lsquo;FOOL&rsquo;. While, in the echo area, the part of the search string that failed to match is highlighted using face isearch-fail. We can correct our string if it was mis-typed, if we liked the place where it is found we can remain there by pressing <RET> or can just remove the character from search string which cannot be found by typing &lsquo;C-g&rsquo;, so this will remove the &rsquo;T' in &lsquo;FOOT&rsquo; which could not be found and leaving those that are found. i.e will leave the &lsquo;FOO&rsquo; in &lsquo;FOOT&rsquo;, repressing &lsquo;C-g&rsquo; cancels the search altogether and return to the point where it was before the search has started.</p>

<h3>Special input for incremental search</h3>

<p>There are characters which has special effects when typed during incremental search. In default, the incremental search perform lax space matching i.e. each space, or sequence of spaces, matches any sequence of one or more spaces in the text. Hence, &lsquo;foo bar&rsquo; will match &lsquo;foo bar&rsquo;, &lsquo;foo bar&rsquo;, &lsquo;foo bar&rsquo;, and so on but it will not match &lsquo;foobar&rsquo;. Emacs matches each sequence of space characters in the match string to a regular expression specified by the variable search-whitespace-regexp. To toggle lax space matching &rsquo;M-s <SPC>&lsquo; isearch-toggle-lax-whitespace, and to disable this feature entirely set search-whitespace-regexp to nil, and then each single space will be matched to single space only.</p>

<p>By default the searches in emacs are case-insenitive, when there is an uppercase letter is present in search string, the searches become case-sensitive, once the upper case letter it deleted the search string becomes case-insensitive again.</p>

<table border="2" cellspacing="0" cellpadding="6" rules="groups" frame="hsides">

<colgroup>
<col  class="left" />

<col  class="left" />

<col  class="left" />
</colgroup>
<thead>
<tr>
<th scope="col" class="left">Keybindings</th>
<th scope="col" class="left">Command</th>
<th scope="col" class="left">Description</th>
</tr>
</thead>
<tbody>
<tr>
<td class="left">M-s i</td>
<td class="left">&#xa0;</td>
<td class="left">isearch-toggle-invisible</td>
</tr>

<tr>
<td class="left">C-s C-j</td>
<td class="left">&#xa0;</td>
<td class="left">search for newline character</td>
</tr>

<tr>
<td class="left">C-s C-\\</td>
<td class="left">isearch-toggle-input-method</td>
<td class="left">Toggle the input method</td>
</tr>

<tr>
<td class="left">C-s C-^</td>
<td class="left">isearch-toggle-specified-input-method</td>
<td class="left">prompts for the name of the input method.</td>
</tr>

<tr>
<td class="left">C-s M-%</td>
<td class="left">query-replace or query-replace-regexp</td>
<td class="left">with current search string used as a string to replace.</td>
</tr>

<tr>
<td class="left">C-s M-&lt;TAB&gt;</td>
<td class="left">isearch-complete</td>
<td class="left">tries to complete the search string using the search ring as a list of completion alternatives.</td>
</tr>

<tr>
<td class="left">C-s C-h C-h</td>
<td class="left">&#xa0;</td>
<td class="left">Interactive help.</td>
</tr>

<tr>
<td class="left">C-s C-y</td>
<td class="left">isearch-yank-kill</td>
<td class="left">Appends the current kill to the search string.</td>
</tr>

<tr>
<td class="left">C-s M-y</td>
<td class="left">isearch-yank-pop</td>
<td class="left">If called after 'C-y', replaces the appended text with an earlier kill, similar to usual 'M-y'.</td>
</tr>

<tr>
<td class="left">C-s C-w</td>
<td class="left">isearch-yank-word-or-char</td>
<td class="left">Appends the next character or word at point to the search string.</td>
</tr>

<tr>
<td class="left">C-s M-s C-e</td>
<td class="left">isearch-yank-line</td>
<td class="left">Appends the rest of the line to the search string. if point is already at the end of a line, it appends the next-line.</td>
</tr>

<tr>
<td class="left">C-s C-M-w</td>
<td class="left">isearch-del-char</td>
<td class="left">Deletes the last character from the search string.</td>
</tr>

<tr>
<td class="left">C-s C-M-y</td>
<td class="left">isearch-yank-char</td>
<td class="left">Appends the character after the point to the search string. Alternately, to add the character after point by entering minibuffer with '<b>M-e</b>' and type '<b>C-f</b>' at the end of the search string in the minibuffer</td>
</tr>

<tr>
<td class="left">&#xa0;</td>
<td class="left">&#xa0;</td>
<td class="left">&#xa0;</td>
</tr>
</tbody>
</table>




<table border="2" cellspacing="0" cellpadding="6" rules="groups" frame="hsides">

<colgroup>
<col  class="left" />
</colgroup>
<tbody>
<tr>
<td class="left">Search for non-ASCII characters.</td>
</tr>

<tr>
<td class="left">C-q <b>non graphical character</b></td>
</tr>

<tr>
<td class="left">C-x 8 &lt;RET&gt;</td>
</tr>

<tr>
<td class="left">Use an INPUT Method, so if the INPUT method is enabled in the current buffer so when you start the search, you can use it in the seach string also.</td>
</tr>

<tr>
<td class="left">&#xa0;</td>
</tr>
</tbody>
</table>


<h3>Not exiting incremental search</h3>

<p>There are two categories of commands which you can type without exiting the current incremental search. They are</p>

<ul>
<li><p>Prefix arguments
With these arguments, by default it will apply either to the next action in the search or to the command that exits the search. When isearch-allow-prefix is set to nil, entering a prefix argument will terminate the search.</p></li>
<li><p>Scrolling commands
Scrolling commands exit search. changing variable <code>isearch-allow-scroll</code> to non-nil value, this enables the use of the scroll-bar as well as keyboard scrolling commands. The isearch-allow-scroll also afects some other commands, such as <code>C-x 2</code> and <code>C-x ^</code> which don&rsquo;t actually scroll but do affect where the text appears on the screen.</p></li>
</ul>


<h3>Searching the minibuffer</h3>

<p>If you start search while the minibuffer is active, Emacs searches the content of the minibuffer. If the search fails in the minibuffer, it tries searching the minibuffer history. The minibuffer can be visualized in series of pages. A forward search searches forward to later pages and similarly a reverse search does the backward search. If the current search is a history element, that history element is pulled in the minibuffer. Even you exit the incremental search by press RET, the point remains in the minibuffer unless it is specifically cancelled using C-g.</p>

<h2>Non Incremental search</h2>

<p>So we have visited how the incremental search works, i.e while you type the characters the emacs already begun it searching process and as every word gets added it moves you closer to what you are looking for, and if this is too annoying, emacs does have a conventional non-ncremental search, which require the complete string to present before it start searching.</p>

<table border="2" cellspacing="0" cellpadding="6" rules="groups" frame="hsides">

<colgroup>
<col  class="left" />

<col  class="left" />
</colgroup>
<thead>
<tr>
<th scope="col" class="left">Keybinding</th>
<th scope="col" class="left">Description</th>
</tr>
</thead>
<tbody>
<tr>
<td class="left">C-s &lt;RET&gt; STRING &lt;RET&gt;</td>
<td class="left">search for string</td>
</tr>

<tr>
<td class="left">C-r &lt;RET&gt; STRING &lt;RET&gt;</td>
<td class="left">Search backward for string</td>
</tr>

<tr>
<td class="left">&#xa0;</td>
<td class="left">&#xa0;</td>
</tr>
</tbody>
</table>


<p></div>
</div></p>

<h3>Search for word.</h3>

<p>A &ldquo;word search&rdquo; finds a sequence of words without regard to the type of punctuation between them. For instance, if you enter a search string that consists of two words seperated by a single space, the search matched any sequence of those two words separated by one or more spaces, newlines, or other punctiation characters. Useful for searching text documents where you do not have to worry about the words you are looking for and wether they are sperated by newlines of spaces.
</p></p>

<table border="2" cellspacing="0" cellpadding="6" rules="groups" frame="hsides">

<colgroup>
<col  class="left" />

<col  class="left" />

<col  class="left" />
</colgroup>
<thead>
<tr>
<th scope="col" class="left">Keybinding</th>
<th scope="col" class="left">Commands</th>
<th scope="col" class="left">Description</th>
</tr>
</thead>
<tbody>
<tr>
<td class="left">M-s-w</td>
<td class="left">isearch-toggle-word</td>
<td class="left">if incremental search is active toggle to word search mode.</td>
</tr>

<tr>
<td class="left">&#xa0;</td>
<td class="left">isearch-forward-searching</td>
<td class="left">begin and incremental forward word search.</td>
</tr>

<tr>
<td class="left">M-s-w &lt;RET&gt; WORDS &lt;RET&gt;</td>
<td class="left">&#xa0;</td>
<td class="left">similar to the non-incremenatal forward search.</td>
</tr>

<tr>
<td class="left">M-s w C-r &lt;RET&gt; WORDS &lt;RET&gt;</td>
<td class="left">&#xa0;</td>
<td class="left">similar to non-incremental backward search.</td>
</tr>
</tbody>
</table>


<p></div>
</div></p>

<h3>search for symbols.</h3>

<p>
It is just like normal search, except the boundaries of the search must match the boundaries of the symbol. This feature is mainly useful for searching the source code. 
</p>


<table border="2" cellspacing="0" cellpadding="6" rules="groups" frame="hsides">

<colgroup>
<col  class="left" />

<col  class="left" />

<col  class="left" />
</colgroup>
<thead>
<tr>
<th scope="col" class="left">Keybinding</th>
<th scope="col" class="left">Command</th>
<th scope="col" class="left">Description</th>
</tr>
</thead>
<tbody>
<tr>
<td class="left">M-s</td>
<td class="left">isearch-toggle-symbol</td>
<td class="left">If active incremental search is, toggle symbol search mode.</td>
</tr>

<tr>
<td class="left">&#xa0;</td>
<td class="left">isearch-forward-symbol</td>
<td class="left">else, begin an incremental forward search.</td>
</tr>

<tr>
<td class="left">M-s .</td>
<td class="left">&#xa0;</td>
<td class="left">Start incremental symbol searching forward with the symbol found at the point is added to the initial search.</td>
</tr>

<tr>
<td class="left">M-s \_ &lt;RET&gt; SYMBOL &lt;RET&gt;</td>
<td class="left">&#xa0;</td>
<td class="left">Searches forward for symbol non-incrementally.</td>
</tr>

<tr>
<td class="left">M-s \_ C-r &lt;RET&gt; SYMBOL &lt;RET&gt;</td>
<td class="left">&#xa0;</td>
<td class="left">Search backward for symbol non-incrementally.</td>
</tr>
</tbody>
</table>


<p></div>
</div></p>

<h3>search using regular expressions.</h3>

<p>
A regexp denotes a class of alternative strings to match. Emacs provides both incremental and non-incremental ways to search for a match for a regexp. Below is the syntax for regluar expressions.
</p>




<table border="2" cellspacing="0" cellpadding="6" rules="groups" frame="hsides">

<colgroup>
<col  class="left" />

<col  class="left" />

<col  class="left" />
</colgroup>
<thead>
<tr>
<th scope="col" class="left">Keybindings</th>
<th scope="col" class="left">Command</th>
<th scope="col" class="left">Description</th>
</tr>
</thead>
<tbody>
<tr>
<td class="left">C-M-s</td>
<td class="left">isearch-forward-regexp</td>
<td class="left">Begin incrmental search.</td>
</tr>

<tr>
<td class="left">C-M-r</td>
<td class="left">isearch-backward-regexp</td>
<td class="left">Begin reverse incremental search.</td>
</tr>

<tr>
<td class="left">C-M-s &lt;RET&gt;</td>
<td class="left">re-search-forward</td>
<td class="left">non incremental forward search</td>
</tr>

<tr>
<td class="left">C-M-r &lt;RET&gt;</td>
<td class="left">re-search-backward</td>
<td class="left">non incremental backward search</td>
</tr>
</tbody>
</table>


<p></div></p>

<h2>Understanding Regular expressions (regex)</h2>

<p><a href="https://www.gnu.org/software/emacs/manual/html_node/emacs/Regexps.html">The Emacs Regular Expression</a> have syntax in which a few characters are special constructs and the rest are ordinary. I will just go through the special constructs below, this would be similar to what the emacs tutorial says about regex, except I am putting it in the tabular format.</p>

<table border="2" cellspacing="0" cellpadding="6" rules="groups" frame="hsides">

<colgroup>
<col  class="left" />

<col  class="left" />
</colgroup>
<thead>
<tr>
<th scope="col" class="left">Regex</th>
<th scope="col" class="left">Description</th>
</tr>
</thead>
<tbody>
<tr>
<td class="left">'.' (period)</td>
<td class="left">Matches any single character except a new line.</td>
</tr>

<tr>
<td class="left">'\*'</td>
<td class="left">Means to match preceding regular expression any no. of time as possible.</td>
</tr>

<tr>
<td class="left">'+'</td>
<td class="left">Matches the preceding expression atleast once.</td>
</tr>

<tr>
<td class="left">'?'</td>
<td class="left">Matches the expression either once or none.</td>
</tr>

<tr>
<td class="left">'\*?', '+?', '??'</td>
<td class="left">Non-greedy variants of above operators.</td>
</tr>

<tr>
<td class="left">'\\{N\\}'</td>
<td class="left">That the preceding regular expression matches exactly N times in a row.</td>
</tr>

<tr>
<td class="left">'\\{N,M\\}'</td>
<td class="left">Match N times but not more than M times.</td>
</tr>

<tr>
<td class="left">'[ &#x2026; ]'</td>
<td class="left">Set of character within the bracket.</td>
</tr>

<tr>
<td class="left">'[:char classes:]'</td>
<td class="left">Encloses character classes. [[</td>
</tr>

<tr>
<td class="left">&#xa0;</td>
<td class="left">&#xa0;</td>
</tr>
</tbody>
</table>


<h2>Searching and cases</h2>

<p>While searching within emacs, emacs usually ignores the case of the text which is being searched through, when the search is specified in lower case, for example, searching for word &lsquo;nutrients&rsquo; so while typing the word in incremental search will match &lsquo;nutrients&rsquo; begining with either &lsquo;Nutri&rsquo; and &lsquo;nutri&rsquo;. Likewise, &lsquo;[ab]&rsquo; matches &lsquo;a&rsquo;, &lsquo;A&rsquo;, &lsquo;B&rsquo;, &lsquo;b&rsquo;. Any appearance of the uppercase letter within the search makes the searches case-sensisive, thus, searching for &lsquo;Nutri&rsquo; doesn&rsquo;t matches &lsquo;nutri&rsquo; and &lsquo;NUTRI&rsquo;. Typing <em>&rsquo;M-c'</em> within an incremental search toggles the case sensetivity of that search.</p>

<p>When we set <strong>case-fold-search</strong> to nil then all the letters must match exactly incuding the case. This is per-buffer variable, setting this variable to a particular buffer will only affect that buffer and will have no effects on the other buffers. The effect of this variable applies to non-incremental searches and to the replace commands as well.</p>

<h2>Replaement commands</h2>

<p>There is a simple replace command as <strong>M-x replace-string</strong> which replaces the occurunces in the buffer. <strong>M-% command</strong> is for query replace, which presents each occurence of the pattern and asks wether to replace it.</p>

<p>The replace command usually work from the point place where your cursor is to the end of the buffer. In an active region replace commands will work in that region only. The basic replace commands replaces one search string with one replacement string. <strong>expand-region-abbrevs</strong> makes emacs possible to perform several replacements in parellel. Replacement commands do not use lax space matching1 by default and can be enabled by changing the variable <strong>replace-lax-withespaces</strong> to <strong>t</strong>.</p>

<h3>Unconditional replacements</h3>

<table>
<thead>
<tr>
<th> Unconditional Replacements </th>
</tr>
</thead>
<tbody>
<tr>
<td> M-x replace-string RET string RET newstring RET | Replace all string with new string </td>
</tr>
</tbody>
</table>


<p>This replace every occurence of the string with the new string <em>from the point to the end of the buffer</em>. For doing this in the whole buffer, you must begin with the beginning2 of the buffer. In an active region the replacement is limited to the region.</p>

<h3>Regexp replacement</h3>

<p>Similarly,</p>

<table>
<thead>
<tr>
<th> Regexp replcatement commands. </th>
</tr>
</thead>
<tbody>
<tr>
<td> M-x replace-regexp RET regexp RET newstring | Replace every match for regexp with the new string. </td>
</tr>
</tbody>
</table>


<p>Here the newstring need not required to be constant: it can refer to all or part of the string as matched by the regex. &amp; in newstring stands for the entire match being replaced. \d in newstring where d = digit, stands for whatever matched the d/th/ parenthesized grouping in regexp, also called as backrefrence. # refers to the count of replacements already made in this command. \? will asks for the replacement string each time.</p>

<p><strong>Examples</strong>: M-x replace-regexp RET c[ad]+r RET &amp;-safe RET : replaces cadr with cadr-safe and cddr with cddr-safe M-x replace-regexp RET c[ad]+r-safe RET \1 RET: performs the inverse of above.</p>

<h3>Command and case</h3>

<p>Cases in emacs replace the similar way as it is in incremental search i.e. if the first argument of the replace command is all in lower case it ignores the cases. However, if the case-fold-search is set to nil, case would be significant in the searches.</p>

<h3>Query Replace</h3>

<table>
<thead>
<tr>
<th> Keybinding </th>
<th> Description </th>
</tr>
</thead>
<tbody>
<tr>
<td> M-% string RET newstring RET </td>
<td> Replaces some occurrences of string with newstring. </td>
</tr>
<tr>
<td> C-M-% regexp RET newstring RET </td>
<td> Replace some matches for regexp with new string. </td>
</tr>
</tbody>
</table>


<p>if you want to change only few occurrences and not all of them in the buffer the <strong>M-% (query-replace)</strong> will replace the words one by one and ask for your permission before doing it. Similarly, <strong>C-M-%</strong> performs performs regexp search and replace (query-replace-regexp). It works like replace-regexp except it queries like query-replace .</p>

<p>Character which are used when a match is shown in query-replace or <strong>query-replace-regexp</strong></p>

<table>
<thead>
<tr>
<th> Characters </th>
<th> Their actions while in query-replace </th>
</tr>
</thead>
<tbody>
<tr>
<td> SPC, y </td>
<td> Replace </td>
</tr>
<tr>
<td> DEL, n </td>
<td> Skip to next occurrence </td>
</tr>
<tr>
<td> , (comma) </td>
<td>   Replace and display result.</td>
</tr>
<tr>
<td> C-r </td>
<td> To undo the replaced text. C-x u can also be used. </td>
</tr>
<tr>
<td> RET, q </td>
<td>  Exit without doing any more replacements. </td>
</tr>
<tr>
<td> . (period) </td>
<td> Replace this one and exit, do not replace any more. </td>
</tr>
<tr>
<td> ! (exclamation) </td>
<td> Replace everything do not ask me again. </td>
</tr>
<tr>
<td> Y (UPPERCASE) </td>
<td> Replace all remaining occurrences in all remaining buffer in multi-buffer replacements </td>
</tr>
<tr>
<td> N (UPPERCASE) </td>
<td> Skip to the next buffer in the multi-buffer replacement without replacing remaining occurrences in the current buffer. </td>
</tr>
<tr>
<td> ^ (caret) </td>
<td> Go back to the position of the previous occurrences. </td>
</tr>
<tr>
<td> C-w </td>
<td> to delete the occurrences and enter into recursive editing level. </td>
</tr>
<tr>
<td> e </td>
<td> Edit the replacement string in the mini-buffer. This also becomes new replacement string for any further occurrences. </td>
</tr>
<tr>
<td> C-l </td>
<td> Re-display the screen. </td>
</tr>
<tr>
<td> C-h </td>
<td> Display message summarizing these options.</td>
</tr>
</tbody>
</table>


<h3>Some more commands for searching and looping</h3>

<table>
<thead>
<tr>
<th> Keybindings </th>
<th> Description </th>
</tr>
</thead>
<tbody>
<tr>
<td> M-x multi-search-buffers </td>
<td> Prompt for one or more buffer name ending with RET. Do an incremental search in all the buffers. </td>
</tr>
<tr>
<td> M-x multi-isearch-buffers-regexp </td>
<td> same as multi-isearch-buffer, except it performs incremental regexp search. </td>
</tr>
<tr>
<td> M-x occur </td>
<td> Prompt for a regexp and display a list showing each line in buffer that contains a match for it. To limit the search to part of the buffer, narrow to that part. In the occur buffer you can click on each entry or move point there and type RET, to visit the corresponding position in the buffer that was searched. o and C-o display the match in another window. Typing e in the occur buffer switches to occur edit mode, in which edits made to the entries are also applied to the text in originating buffer. Type C-c C-c to return to the occur mode. Command M-x list-matching-lines is synonymous to Occur mode. </td>
</tr>
<tr>
<td> M-s o </td>
<td> Run occur using the last used search string. Running M-s o when the search is active used the current search string. </td>
</tr>
<tr>
<td> M-x multi-occur </td>
<td> This command is like occur, except it is able to search through buffers. It asks for the buffer names one-by-one. </td>
</tr>
<tr>
<td> M-x multi-occur-in-matching-buffers </td>
<td> Same as multi-occur, except the buffers to search are specified by regular expression which matches visited file names. </td>
</tr>
<tr>
<td> M-x how-many </td>
<td> Prompt for regexp and print for the number of matches for it in the buffer for point. </td>
</tr>
<tr>
<td> M-x flush-lines </td>
<td> Prompt for regexp and delete the line which contains the match for it, operating on the text after point. This deletes the current line if it contains the match starting after point. </td>
</tr>
<tr>
<td> M-x keep-lines </td>
<td> Prompt for regexp and deletes the line which doesn&rsquo;t contain the match regexp. This command always keeps the current line where the match is found. </td>
</tr>
</tbody>
</table>

</div>
  
  


    </article>
  
  
    <article>
      
  <header>
    
      <h1 class="entry-title"><a href="/blog/2015/12/28/day-9-cut/">Day 9 - Cut, Copy, Paste</a></h1>
    
    
      <p class="meta">
        




<time class='entry-date' datetime='2015-12-28T21:32:41+05:30'><span class='date'><span class='date-month'>Dec</span> <span class='date-day'>28</span><span class='date-suffix'>th</span>, <span class='date-year'>2015</span></span> <span class='time'>9:32 pm</span></time>
        
         | <a href="/blog/2015/12/28/day-9-cut/#disqus_thread">Comments</a>
        
        
      </p>
    
  </header>


  <div class="entry-content"><p>As in my last post and coming posts I would be using org2blog to write content further to my blog sites and would further be writing about how to use customize it, in my later posts. This is a cool tool to use when you are writing and posting.</p>

<p>In my earlier days of using computers, copy and pasting something was such an interesting thing to do and the most innovative thing possibly could happen to computers. we just copy things around and move on. I started using emacs some couple of years back, and using it fully only some months back. So many things I learnt and learning. Believe me today, I am amused to know the possiblities cut and paste does have.</p>

<p>In Emacs, killing means erasing the text and copying it into the &ldquo;kill ring&rdquo;. &ldquo;Yanking&rdquo; means bringing it back. The generalized terms for these are cutting and paste, copy and paste. Killing and yanking a text are the most common ways to move or copy text within emacs.</p>

<h1>Commands which remove text</h1>

<p>Most commands which erases text from the buffer saves it in the kill ring. These are known as &ldquo;kill&rdquo; commands. We usually on other editors or place also call it is cut. But Emacs, unlike other editors, stores several recents cuts and not just the last one, which makes killing a safe process, now I don&rsquo;t have to worry about loosing my text. Never felt this confident earlier while killing something. :) The kill ring is shared by all buffers , so the text that&rsquo;s killed is shared among all the buffers. &lsquo;C - /&rsquo; (undo) to undo a kill comannd and bring the killed text back into the buffer, but will keep the killed buffer in the kill ring and this can also be used elsewhere.</p>

<p>On graphical displays, killing some text back copies it to the system clipboard as well and then there are commands which kills the text but do not save it into the kill-ring are called as the delete command. &lsquo;C-d&rsquo; (delete-char) and &lsquo;DEL&rsquo; (delete-backward-character) will delete only one character at time, and those character which deletes only spaces or newlines, killing erase signigicant amount of nontrivial data and do a kill operation as mentioned above.</p>

<h3>Deletion</h3>

<p>This will erase the text and not saving in the kill ringh. In emacs, usually those command used for deletion, just delete a character at a time or whitspaces. Some of the delete commands to avoid future confusion.</p>

<table border="2" cellspacing="0" cellpadding="6" rules="groups" frame="hsides">


<colgroup>
<col  class="left" />

<col  class="left" />

<col  class="left" />
</colgroup>
<thead>
<tr>
<th scope="col" class="left">Keybindings</th>
<th scope="col" class="left">Commands</th>
<th scope="col" class="left">Description</th>
</tr>
</thead>

<tbody>
<tr>
<td class="left">DEL or</td>
<td class="left">&#xa0;</td>
<td class="left">&#xa0;</td>
</tr>


<tr>
<td class="left">Backspace</td>
<td class="left">delete-backward-char</td>
<td class="left">Delete the previous character or text in the region</td>
</tr>


<tr>
<td class="left">Delete</td>
<td class="left">delete-foward-char</td>
<td class="left">Delete the next character or the next in the region if it's active.</td>
</tr>


<tr>
<td class="left">C-d</td>
<td class="left">delete-char</td>
<td class="left">Delete the next character.</td>
</tr>


<tr>
<td class="left">M-\\</td>
<td class="left">delete-horizontal-space</td>
<td class="left">Delete spaces and tabs around point.</td>
</tr>


<tr>
<td class="left">M-SPC</td>
<td class="left">just-one-space</td>
<td class="left">Delete space and tabs around point leaving just one space.</td>
</tr>


<tr>
<td class="left">C-x C-o</td>
<td class="left">delete-blank-lines</td>
<td class="left">Delete blank lines aroung the current line.</td>
</tr>


<tr>
<td class="left">M-^</td>
<td class="left">delete-indentation</td>
<td class="left">Join two lines by deleting the intervening newline, along with and indentation following it.</td>
</tr>
</tbody>
</table>


<h3>Killing or cutting</h3>

<p>The simplest way to kill something is using the kill-command i.e. C-k (kill-line), this will invaribaly will remove anything from the point to the end of the line, the point is place where my cursor is, and everything from the cursor to the end of the line would be removed. If the cursor is at the end of the line, it kills the line ending the newline character, merging the next line into the current one; if point is at the beginning of the line, this leave the line blank.  Spaces and tabs are usually ignored while deciding the case to apply. As long as point is after the last visible character in the line, you can be sure that &lsquo;C-k&rsquo; will kill the newline; hence to kill an entire non-blank line, go to the beginning of the line and type &lsquo;C-k&rsquo; twice. This can also be done by giving the positive arguments to &lsquo;C-k&rsquo;, and with negative arguments it kill the previous lines before the point. &lsquo;C-k&rsquo; cannot be used to kill a character instead use the deletion commands above. Another way to kill the line and its new line is C-S-backspace, it kills regardless of the position where it is.</p>

<p>Killing a line acts as cutting line, and saving it into the kill-ring. Remember, killing a line can be recovered from the kill-ring, but not deleting the characters.</p>

<table border="2" cellspacing="0" cellpadding="6" rules="groups" frame="hsides">


<colgroup>
<col  class="left" />

<col  class="left" />

<col  class="left" />
</colgroup>
<thead>
<tr>
<th scope="col" class="left">Keybindings</th>
<th scope="col" class="left">Commands</th>
<th scope="col" class="left">Description</th>
</tr>
</thead>

<tbody>
<tr>
<td class="left">C-k</td>
<td class="left">kill-line</td>
<td class="left">Kill the rest of the line from the point.</td>
</tr>


<tr>
<td class="left">C-S-backspace</td>
<td class="left">kill-whole-line</td>
<td class="left">Kill an entire line at once.</td>
</tr>


<tr>
<td class="left">C-w</td>
<td class="left">kill-region</td>
<td class="left">Kill the region as the name suggets.</td>
</tr>


<tr>
<td class="left">M-w</td>
<td class="left">kill-ring-save</td>
<td class="left">Copy the region into the kill ring.</td>
</tr>


<tr>
<td class="left">M-d</td>
<td class="left">kill-word</td>
<td class="left">kill the next word.</td>
</tr>


<tr>
<td class="left">M-DEL</td>
<td class="left">backward-kill-word</td>
<td class="left">Kill one word backwards</td>
</tr>


<tr>
<td class="left">C-x DEL</td>
<td class="left">backward-kill-sentence</td>
<td class="left">Kill back to the beginning of sentence.</td>
</tr>


<tr>
<td class="left">M-k</td>
<td class="left">kill-sentence</td>
<td class="left">Kill to the end of sentence.</td>
</tr>


<tr>
<td class="left">C-M-k</td>
<td class="left">kill-sexp</td>
<td class="left">Kill the following balanced sexp.</td>
</tr>


<tr>
<td class="left">M-z CHAR</td>
<td class="left">zap-to-char</td>
<td class="left">Kill through the next occurence of CHAR.</td>
</tr>
</tbody>
</table>


<p>M-w and C-w are commonly used commands, which kils text in the region and save it in kill-ring. M-w is the emacs copy command. The command M-z combines killing with searching, it read a character and kill from point up to the next occurence of that character in the buffer. A numeric argument would act as a repeat count; a negative argument meant search the text backward and kill text before point.</p>

<p>The are certain buffers which contain &lsquo;read-only text&rsquo; which cannot be modified and therefore cannot be killed, but the kill command still works. they move over text and save it into the kill-ring, without actually deleting the buffer. Normall, they will beep and display error message if this will happen. There may be times when we copy the similar text again, but if we change the varibale &lsquo;kill-do-not-save-duplicates&rsquo; to a non-nil value, identical subsequent killls would yeild a single kill-ring entry, without duplication.</p>

<h1>Commands which insert text</h1>

<p>It simply means pasting, and for theory, &ldquo;Yanking means reinserting text previously killed.&rdquo;</p>

<p>The basic yanking command is &lsquo;C-y&rsquo; (yank). It inserts the most recent kill, leaving the cursor at the end of the inserted text. It also sets the mark at the beginning of the inserted text, without activating it; this lets jumping to the posisition eaisly with &lsquo;C-u C-SPC&rsquo;. With &lsquo;C-u C-y&rsquo; it does exact opposite which means leaving the cursor in the front of the inserted text and sets the mark at the end. ON graphical display the yank command checks the clipboard if any other application has placed any text and is more recently than the last emacs kill.</p>

<h3>The kill ring</h3>

<p>The kill ring is a list of blocks of text that were previously killed. There is only one kill ring shared by all buffers, so we can kill(cut) text from one buffer and yank(paste) it in another buffer. The maximum no. of buffer stored in kill ring is controlled by the variable &lsquo;kill-ring-max&rsquo;. The default is 60. Emacs cycles the kill ring by removing the older entries if we reach the limit. The actual contents of the kill ring are stored in buffer &lsquo;kill-ring&rsquo; and can be viewed using &lsquo;C-h v kill-ring&rsquo;</p>

<h3>Yank(paste)ing earlier kills</h3>

<p>Numeric arguments can be used to yank a text that is no longer the most recent. If you remeber the kill entry you can eaisly yank it back. If you don&rsquo;t remember you can use &rsquo;M-y' (yank-pop) command to cycle through the possiblities. If the previous command was yank command, &rsquo;M-y' takes the text that was yanked and replaces it with the txt of the next-to-the-last kill, first use C-y to yank the last kill and then use M-y to replace it with the previous kill.</p>

<h3>Appending kills</h3>

<p>If two or more kill commands are run in a row, combines their text into a single entry n the kill ring, so a single &lsquo;C-y&rsquo; yanks all the text as a unit. Basically the commands that kill forward from point add onto the end of the previous killed text. Any sequence of mixed forward and backward kill commands puts all the killed text into one entry without rearrangement and Numeric arguments do not break the sequence of appending kills.</p>

<table border="2" cellspacing="0" cellpadding="6" rules="groups" frame="hsides">


<colgroup>
<col  class="left" />

<col  class="left" />

<col  class="left" />
</colgroup>
<thead>
<tr>
<th scope="col" class="left">Keybindings</th>
<th scope="col" class="left">Commands</th>
<th scope="col" class="left">Description</th>
</tr>
</thead>

<tbody>
<tr>
<td class="left">C-y</td>
<td class="left">yank</td>
<td class="left">yank(paste) the last kill in the buffer</td>
</tr>


<tr>
<td class="left">M-y</td>
<td class="left">yank-pop</td>
<td class="left">replace the text just yanked with an earlier batch of killed text</td>
</tr>


<tr>
<td class="left">C-M-w</td>
<td class="left">append-next-kill</td>
<td class="left">Cause the following command if it is a kill command to append to previous kill</td>
</tr>
</tbody>
</table>


<h1>Cut and paste in X</h1>

<p>I have covered enough about copying, cutting and  pasting of the text, these all work expeceted in the terminal window, certain further operations are added while we are working with emacs GUI, they mainly involve usage of the OS clipboard along with the kill-ring. On a graphical display it eases us in transferring the data among other applications using clipboard. On X. two other similar facilities are available, known as primary selection and secondary selection, emacs running on the graphical system integrate with these facilities. Emacs by default uses UTF-8 encoding for interprogram text transfers. If you are not happy with the text you pasted(well, I meant the encoding here.) another coding system can be specified &lsquo;C-x RET x&rsquo; or &lsquo;C-x RET X&rsquo;. Let me briefly go through the available facilities.</p>

<h3>Clipboard</h3>

<p>Its a facility that most graphical applications use for &ldquo;cutting and pasting&rdquo;, when it exists emacs is going to use it for its kill and yank commands. When some text is killed or copied to kill-ring, the text is also placed in the clipboard. Usually, emacs wipes the clipboard clean before putting its contents in there, though this behavior can be modified by setting variable &lsquo;save-interprogram-paste-before-kill&rsquo; to t. This will allow emacs to first save the contents of the clipboard to its kill-ring before deleting it from the clipboard, preventing you from loosing critical data. Yank commands too uses the clipboard, so if someother program is using the clipboard.</p>

<h3>The Temp text selection or the Primary Selection</h3>

<p>When in X, there is a primary selection containing the last stretch of text selected, usually by dragging the mouse. This is usually seperate from the clipboard. The contents in this selection are changed over every new selection, whereas the clipboard changes is only possible by cutting, copying and pasting. Under X, when the region is active (i.e when primary selection is made or in other words the text is selected by dragging or clicking the mouse or by keyboard commands and moving point.)</p>

<h3>The Secondary selection</h3>

<p>The X Window system provides a second facility known as the secondary selection.</p>

<table border="2" cellspacing="0" cellpadding="6" rules="groups" frame="hsides">


<colgroup>
<col  class="left" />

<col  class="left" />

<col  class="left" />
</colgroup>
<thead>
<tr>
<th scope="col" class="left">Mouse binding</th>
<th scope="col" class="left">Command</th>
<th scope="col" class="left">Description</th>
</tr>
</thead>

<tbody>
<tr>
<td class="left">M-Drag-Mouse-</td>
<td class="left">mouse-set-secondary</td>
<td class="left">With one end at the place where you press down the button, and the other end at the place where you release it. This text is highlighted using the \`secondary-selection\` face, as you drag. The windows scrolls automatically if you drag the mouse off the top or bottom of the window</td>
</tr>


<tr>
<td class="left">M-Mouse-1</td>
<td class="left">mouse-start-secondary</td>
<td class="left">set one endpoint for the secondary selection.</td>
</tr>


<tr>
<td class="left">M-Mouse-3</td>
<td class="left">mouse-secondary-save-then-kill</td>
<td class="left">Set the secondary selection, with one end at the position clicked and the other at the position specified with M-Mouse-1</td>
</tr>


<tr>
<td class="left">M-mouse-2</td>
<td class="left">mouse-yank-secondary</td>
<td class="left">Insert the secondary selection where you click, placing point at the end of the yanked text</td>
</tr>
</tbody>
</table>


<h2>Accumulating text</h2>

<p>The text can be moved by killing or yanking, but there are other ways that are also convinient methods for copying one block of text in many places, or for copying many scattered blocks of text in one place.</p>

<table border="2" cellspacing="0" cellpadding="6" rules="groups" frame="hsides">


<colgroup>
<col  class="left" />

<col  class="left" />
</colgroup>
<thead>
<tr>
<th scope="col" class="left">Commands</th>
<th scope="col" class="left">Description</th>
</tr>
</thead>

<tbody>
<tr>
<td class="left">M-x append-to-buffer</td>
<td class="left">Apend region to the contents of a specified buffer</td>
</tr>


<tr>
<td class="left">M-x prepend-to-buffer</td>
<td class="left">prepend region to the contents of a specified buffer</td>
</tr>


<tr>
<td class="left">M-x copy-to-buffer</td>
<td class="left">Copy regions into a specified buffer, deleting that buffers old contents.</td>
</tr>


<tr>
<td class="left">M-x insert-buffer</td>
<td class="left">Insert the content of a specified buffer into current buffer at point.</td>
</tr>


<tr>
<td class="left">M-x append-to-file</td>
<td class="left">Append region to the contents of a specified file at the end.</td>
</tr>
</tbody>
</table>


<p>M-x append-to-buffer, this reads the buffer name, then inserts a copy of the region into the buffer specified. If you specify non-existent buffer, `append-to-buffer` creates the buffer. The text is inserted whenever point is in that buffer.</p>

<p>Point in that buffer is left at the end of the copied text, so successive uses of `append-to-buffer` accumulate the text in the specified buffer in the same order as they were copied.  `prepend-to-buffer` is just like `append-to-buffer` except that point in the other buffer is left before the copied text, so successive prepending happens in the reverse order.</p>

<p>As it can append to buffer it can also accumulated the text directly to the file with &rsquo;M-x appened-to-file" only with the files which are not yet being visited to the file. because if we add it to the file we are editing in Emacs, would chnage the file behind Emacs&rsquo;s back and you can loose your precious editing.</p>

<h2>Rectangles</h2>

<p>&ldquo;Rectangle&rdquo; commands operate on rectangular areas of the text: and all of the characters between certain pair of columns, in a certain range of lines. In Emacs there are commands to operate on these rectangular areas, i.e to kill, yank and delete them off. These commands are useful with text in multicolumn formats, and for changing text into or out of such formats.</p>

<p>To specify a rectangle for a command to work on, set the mark at one corener and point at the opposite corener. This is called as the region-rectangle. If point and mark are in the same column, the rectangle region is considered empty.</p>

<p>The rectangle region is controlled in much similar way as the region  is controlled. But remember that a given combination of point and mark values can be interpreted as a region or as a rectangle.</p>

<table border="2" cellspacing="0" cellpadding="6" rules="groups" frame="hsides">


<colgroup>
<col  class="left" />

<col  class="left" />

<col  class="left" />
</colgroup>
<thead>
<tr>
<th scope="col" class="left">Key bindings</th>
<th scope="col" class="left">Command</th>
<th scope="col" class="left">Description</th>
</tr>
</thead>

<tbody>
<tr>
<td class="left">C-x r k</td>
<td class="left">kill-rectangle</td>
<td class="left">kill the text of the rectangle region, and saving its contents to the "last-killed-rectangle"</td>
</tr>


<tr>
<td class="left">C-x r M-w</td>
<td class="left">copy-rectangle-as-kill</td>
<td class="left">Save the text of the region-rectangle as the last-killed-rectangle.</td>
</tr>


<tr>
<td class="left">C-x r d</td>
<td class="left">delete-rectangle</td>
<td class="left">Deletes the text of the region rectangle. The delete command works too.</td>
</tr>


<tr>
<td class="left">C-x r y</td>
<td class="left">yank-rectangle</td>
<td class="left">As the name suggests, it yanks the rectangle.</td>
</tr>


<tr>
<td class="left">C-x r o</td>
<td class="left">open-rectangle</td>
<td class="left">Insert blank space to fill the space of the region-rectangle.</td>
</tr>


<tr>
<td class="left">C-x r N</td>
<td class="left">rectangle-line-numbers</td>
<td class="left">Insert line numbers along the left edge of the region rectangle.</td>
</tr>


<tr>
<td class="left">C-x r c</td>
<td class="left">clear-rectangle</td>
<td class="left">CLear the region-rectangle by replacing all of its contents with spaces.</td>
</tr>


<tr>
<td class="left">M-x delete-whitespace-rectangle</td>
<td class="left">&#xa0;</td>
<td class="left">Delete whitespaces in each of the lines on the specified rectangle.</td>
</tr>


<tr>
<td class="left">C-x r t STRING <RET></td>
<td class="left">string-rectangle</td>
<td class="left">Replace rectangle contents with STRING on each line.</td>
</tr>


<tr>
<td class="left">M-x string-insert-rectangle <RET> STRING <RET></td>
<td class="left">&#xa0;</td>
<td class="left">Insert string on each line of the rectangle.</td>
</tr>
</tbody>
</table>


<h2>CUA Bindings</h2>

<p>Now, this is some interesting keybindings provided by emacs to its users who are migrating from windows or other editing systems. The command &rsquo;M-x cua-mode" sets up keybindings, that are compatible with the Common User Access (CUA) systems used in many other applications. When CUA mode is enabled the &lsquo;C-x&rsquo;, &lsquo;C-c&rsquo;, &lsquo;C-v&rsquo;, and &lsquo;C-z&rsquo; invoke commands that cut (kill), copy, paste(yank), and undo respectively. The &lsquo;C-x&rsquo; and &lsquo;C-c&rsquo; work only on the active regions. Otherwise they still act as the prefix keys and the standard emacs commands like &lsquo;C-x C-c&rsquo; still works.</p>

<p>To enter an Emacs command like `C-x C-f' while the mark is active, use one of the following methods: either hold `Shift' together with the prefix key, e.g., `S-C-x C-f', or quickly type the prefix key twice,e.g., `C-x C-x C-f'.</p>

<p>CUA mode provides enhanced rectangle support with visible rectangle highlighting.  Use `C-RET' to start a rectangle, extend it using the movement commands, and cut or copy it using `C-x' or `C-c'.  `RET' moves the cursor to the next (clockwise) corner of the rectangle, so you can easily expand it in any direction.  Normal text you type is
inserted to the left or right of each line in the rectangle (on the same side as the cursor).</p>

<p>With CUA you can easily copy text and rectangles into and out of registers by providing a one-digit numeric prefix to the kill, copy, and yank commands, e.g., `C-1 C-c' copies the region into register `1', and `C-2 C-v' yanks the contents of register `2'.</p>
</div>
  
  


    </article>
  
  
    <article>
      
  <header>
    
      <h1 class="entry-title"><a href="/blog/2015/12/26/day-8-mark/">Day 8 - Mark and the Region</a></h1>
    
    
      <p class="meta">
        




<time class='entry-date' datetime='2015-12-26T21:24:47+05:30'><span class='date'><span class='date-month'>Dec</span> <span class='date-day'>26</span><span class='date-suffix'>th</span>, <span class='date-year'>2015</span></span> <span class='time'>9:24 pm</span></time>
        
         | <a href="/blog/2015/12/26/day-8-mark/#disqus_thread">Comments</a>
        
        
      </p>
    
  </header>


  <div class="entry-content"><h1>Mark and the region<a id="sec-1" name="sec-1"></a></h1>

<p>Many command in Emacs operate on parts of the current buffer, to specify the text for such commands, we need to select the text, by marking it at one end of it and move the point to the other end. This text between the point and the mark is called as &ldquo;the region&rdquo; or &ldquo;the selection&rdquo;. This region always extend between the point and the mark, each time you move the point, the region changes.</p>

<p>Setting the mark at the position also &ldquo;activates&rdquo; it. Emacs indicates the extent by highlighting the text within it, using the &lsquo;region&rsquo; face. Further on customizing it can be found under <span class="underline">Face Customization</span>.</p>

<p>Once the commands are run the region, Emacs automatically deactivates this region and turns off the highlighting; this can also be explicitly deactivate by typing &lsquo;C-g&rsquo;. Movement commands <sethyperlink>  doesn&rsquo;t work on the region. The behaviour is known as Transient Mark mode. Disabling mark mode switched Emacs to an alternate behaviour. Also, when you mark something in one buffer, it doesn&rsquo;t have effect in anyother buffer, so while you come back you will see the mark still present at the same buffer at same location.</p>

<p>Here are some commands for setting the mark; C is still the ctrl and M- is Meta or Alt or Esc key on your keyboard.</p>

<table border="2" cellspacing="0" cellpadding="6" rules="groups" frame="hsides">


<colgroup>
<col  class="left" />

<col  class="left" />

<col  class="left" />
</colgroup>
<thead>
<tr>
<th scope="col" class="left">keybindings</th>
<th scope="col" class="left">commands</th>
<th scope="col" class="left">description</th>
</tr>
</thead>

<tbody>
<tr>
<td class="left">C - SPC</td>
<td class="left">set-mark-command</td>
<td class="left">Set the mark at point and activate it</td>
</tr>


<tr>
<td class="left">C - @</td>
<td class="left">&#xa0;</td>
<td class="left">The Same</td>
</tr>


<tr>
<td class="left">C-x C-x</td>
<td class="left">exchange-point-and-mark</td>
<td class="left">set the mark at point and activate it and move point where the mark used to be.</td>
</tr>


<tr>
<td class="left">Drag-Mouse-1</td>
<td class="left">&#xa0;</td>
<td class="left">Set the point and mark around the text you drag across.</td>
</tr>


<tr>
<td class="left">Mouse-3</td>
<td class="left">move-save-then-kill</td>
<td class="left">Set the mark at point, then move point to where you click.</td>
</tr>


<tr>
<td class="left">Shift and cursor motion keys</td>
<td class="left">&#xa0;</td>
<td class="left">set the mark at point if the mark is inactive, then move point</td>
</tr>
</tbody>
</table>


<p>OK, so now we know how to mark the text, but why really I want to do it, and learn so many combinations, when it can simply be done by holding and moving the mouse around, remind me of selecting text in browser; well, some real line usage is: say, you want to select some text and make it uppercase, so just select that area of text using any of the above key bindings and run C-x C-u, and you see all the characters becoming uppercase, neat isn&rsquo;t it, I can use this same mark to remember the text, but ofcourse I can select the position of my text in the buffer too, it reminds me something like bookmark, so for an example in a text file or a code of more than 1000 lines, I encounter something interesting, but have to move ahead also, for this I only see 2 ways, either select and copy the text and save it in some place, or just remember it, the emacs remember function just does that.  I selected a region and do not want to do anything with it as such, but just remember the position of the mark in the buffer type so I type &ldquo;C-SPC C-SPC&rdquo; just does that, i.e remember my position, and C-u C-SPC later jumps back to the mark. I will speak more about the mark ring further in Today itself.</p>

<p>Oh, now I know why I need it, but it may not be everytime I want to select the text and do something with it, so I activated the mark  by mistake using the key C-SPC and now wherever I move the cursor its just getting highlighted, and I am not sure what may happen if I type something, this is a time I really hate myself to be bought in, when I know how to enter into something, but do not know how to come out without making any unknown change. C-g comes to the rescue. It just is so cool, and a saviour isn&rsquo;t it.</p>

<p>Ah, there are endless commands in emacs, and if there aren&rsquo;t one you can always create one, its pretty simple. For eg. C-x C-x exchanges the positions of the point and the mark(I need to find out its practical use). And there are many ways too to set mark and selecting region
for eg. I can use mouse by pressing the left mouse button and moving around the text; clicking the right mouse button set the mark at point i.e first you click the left mouse button which will set the mark, right click to the place till where you want to make selection; further to this you can set the mark and use the cursor command or arrow keys to select the text. These are so cool tricks, I so despartley want to make video lessons now, nevermind will try to do some video lessons later once my 30 Days challenge is over.</p>

<p><em>Notes:</em>
<em>1. By any chance if your C-SPC is not working try using C-@ or vice-versa, this is also bound to the set mark command. I am not sure, but then some keyboards might not support C-SPC.</em></p>

<h2>Marking objects like word, list, paragraph or page.<a id="sec-2" name="sec-2"></a></h2>

<p>As we were taking earlier M-@ extend the mark on word and repeated invocation extend the region by advancing one word at a time and if the mark is active and located before point this same command moves the mark backward from its current position, one word at a time and while working with this we do not have to set the mark as well and it does accepts numeric arguments, so highlighting the next ten words would be C-u 10 M-@.</p>

<p>The Numerical argument and repeated invocation works with all the command mentioned in the table, ofcourse, not the last one which marks the whole buffer, I doubt repeated invocation would start marking other buffers too ;).</p>

<h2>Using the selected region and  Operating on the same<a id="sec-3" name="sec-3"></a></h2>

<ul>
<li>We can kill the region using C-w.</li>
<li>We can copy the region M-w.</li>
<li>Convert the case with C-x C-l or C-x C-u.</li>
</ul>


<p><em>as its already covered in my previous days, so I will save some effort explaining again.</em></p>

<ul>
<li>Undo change C-u C-/.</li>
<li>Replace text withing using M-%. (Yay!! I was wishing I could find something like this.)</li>
<li>Indent it with C-x TAB or C-M-\</li>
<li>Fill it as text with M-x fill-region.</li>
<li>Check the spelling M-$.</li>
<li>Evaluate the lisp code, if you have one M-x eval-region. (Got the similar tip sometime back on IRC, I was earlier while making changes to my .emacs. I was actually closing emacs and then opening again.)</li>
<li>Save it in a register. C-x r s.</li>
<li>and ofcourse save this region in some file. I will be coming to this soon.</li>
</ul>


<h1>The Mark Ring<a id="sec-4" name="sec-4"></a></h1>

<p>The command C-SPC C-SPC is hndy when you want to use the mark to remember a poistion if I wish to remember and may return to it later. It pushes the current point into the mark ring, without activating the mark. To return to the position, we can use &lsquo;set-mark-command&rsquo; with a prefix argument C-u C-SPC. This moves the point to where the mark was and deactivates the mark if it was active.Each subsequent C-u C-SPC jumps to a prior position stored in the mark ring.</p>

<p>Each buffer has its own mark ring. All editing command use the current buffer&rsquo;s mark ring. In particular, C-u C-SPC always stays in the same buffer.</p>

<h2>Marking texts globally<a id="sec-5" name="sec-5"></a></h2>

<p>Apart from the ordinary mark ring that belongs to each buffer, Emacs has aloso a single mark mode &ldquo;global mark ring&rdquo;. Each time the mark is set, this is recorded in the global mark ring in addition to the current buffer&rsquo;s own mark ring.</p>

<h2>Shift Selection<a id="sec-6" name="sec-6"></a></h2>

<p>If you hold down the shift key while typing a cursor motion command, the sets the mark before the moving point, so that the region extends from the original position of point to its new position. This feature is referred to as &ldquo;shift-selection&rdquo;. It is similar to text is selected in other editors.</p>

<p>To turn of shift selection, set &lsquo;shift-select-mode&rsquo; to &lsquo;nil&rsquo;</p>

<h2>Disabling transient mark mode<a id="sec-7" name="sec-7"></a></h2>

<p>Setting the mark activates and highlights the region, and is also called as Transient Mark mode. This is a minor mode and is enabled by default. It can be toggled with &rsquo;M-x transient-mark-mode' or with the &lsquo;Active Region Highlighting&rsquo; menu item from the options menu.</p>
</div>
  
  


    </article>
  
  
    <article>
      
  <header>
    
      <h1 class="entry-title"><a href="/blog/2015/12/20/day-7-commands-for-human-languages-and-editing-them/">Day 7 - Commands for Human Languages and Editing Them</a></h1>
    
    
      <p class="meta">
        




<time class='entry-date' datetime='2015-12-20T21:20:12+05:30'><span class='date'><span class='date-month'>Dec</span> <span class='date-day'>20</span><span class='date-suffix'>th</span>, <span class='date-year'>2015</span></span> <span class='time'>9:20 pm</span></time>
        
         | <a href="/blog/2015/12/20/day-7-commands-for-human-languages-and-editing-them/#disqus_thread">Comments</a>
        
        
      </p>
    
  </header>


  <div class="entry-content"><p>Emacs is wonderful for text editing and related stuff with text. It has many modes which helps in editing and managing text, which help increase the productive overall, here I explored some of the major modes and commands which can quickly help for editing text.</p>

<h2>Text Editing in Emacs<a id="sec-1-1" name="sec-1-1"></a></h2>

<p>Emacs has several major modes for handelling text, there is text mode for ordinary text which customizes emacs in small ways for syntactic convention of text. Outline mode provides special commands to handle text, Org Mode extends Outline mode and turns emacs into a full fledged organizer: we can manage TODO Lists, store notes and publish them in many formats and I would speak more about this in my coming days learnings. TeX and LaTeX mode contains embedded commands; HTML mode for HTML and SGML Modes; nxml-mode for XML Mode; Nroff Mode for Groff and Nroff Mode.</p>

<p>It is also possible to edit pictures made out of text characters, also referred as *&ldquo;ASCII art&rdquo;* using Picture mode.</p>

<h2>Words<a id="sec-1-2" name="sec-1-2"></a></h2>

<p>There are several commnads in emacs for operating on words and many of these I have already covered in my Day-1 and Day-4, but let me redo, so I will remeber it for a long time.
Again, the <strong>M</strong> refers the Meta i.e the Alt or Esc key on the keyboard and is followed by the character keys.</p>

<table border="2" cellspacing="0" cellpadding="6" rules="groups" frame="hsides">


<colgroup>
<col  class="left" />

<col  class="left" />

<col  class="left" />
</colgroup>
<thead>
<tr>
<th scope="col" class="left">Key bindings</th>
<th scope="col" class="left">commands</th>
<th scope="col" class="left">description</th>
</tr>
</thead>

<tbody>
<tr>
<td class="left">M-f</td>
<td class="left">forward-word</td>
<td class="left">Self descriptive as it moves forward on word</td>
</tr>


<tr>
<td class="left">M-b</td>
<td class="left">backward-word</td>
<td class="left">it moves one word back.</td>
</tr>


<tr>
<td class="left">M-d</td>
<td class="left">kill-word</td>
<td class="left">kills up to the end of the word</td>
</tr>


<tr>
<td class="left">M-<DEL></td>
<td class="left">backward-kill-word</td>
<td class="left">kill backward to the beginning of the word.</td>
</tr>


<tr>
<td class="left">M-@</td>
<td class="left">mark-word</td>
<td class="left">Mark to the end of the word</td>
</tr>


<tr>
<td class="left">M-t</td>
<td class="left">transpose-words</td>
<td class="left">Transpose the word and drag across others</td>
</tr>


<tr>
<td class="left">M-=</td>
<td class="left">count-words-region</td>
<td class="left">gives the count of the words in the region.</td>
</tr>
</tbody>
</table>


<p><em>NOTES:</em>
<em>1. These keys parrellel with the character-based movements</em>
<em>2. The numeric arguments serves as the repeat count and the negative arguments would make the commands move in the opposite direction.</em>
<em>3. M-<DEL> deletes the word to the point where M-b would end, it will kill the comma and space as well, M-b M-d to just kill the word but not the comma.</em>
<em>4. If we choose there keybindings in our shell <strong>(set -o emacs)</strong>, these word keybindings can help us in moving around the long commands.</em></p>

<h2>Sentences<a id="sec-1-3" name="sec-1-3"></a></h2>

<p>The meta keys are also helpful in moving around the sentences.</p>

<table border="2" cellspacing="0" cellpadding="6" rules="groups" frame="hsides">


<colgroup>
<col  class="left" />

<col  class="left" />

<col  class="left" />
</colgroup>
<thead>
<tr>
<th scope="col" class="left">Keybindings</th>
<th scope="col" class="left">commands</th>
<th scope="col" class="left">description</th>
</tr>
</thead>

<tbody>
<tr>
<td class="left">M-a</td>
<td class="left">backward-sentence</td>
<td class="left">This will move the point to the beginning of the sentence</td>
</tr>


<tr>
<td class="left">M-e</td>
<td class="left">forward-sentence</td>
<td class="left">Will move forward to the end of sentence.</td>
</tr>


<tr>
<td class="left">M-k</td>
<td class="left">kill-sentence</td>
<td class="left">Kill forward to the end of the sentence.</td>
</tr>


<tr>
<td class="left">C-x <DEL></td>
<td class="left">backward-kill-sentence</td>
<td class="left">kill back to the beginning of the sentence.</td>
</tr>
</tbody>
</table>


<h3>Quoting from EMACS Manual<a id="sec-1-3-1" name="sec-1-3-1"></a></h3>

<p>#+BEGIN<sub>SRC</sub> Quote
 The sentence commands assume that you follow the American typist&rsquo;s
convention of putting two spaces at the end of a sentence.  That is, a
sentence ends wherever there is a `.&lsquo;, `?&rsquo; or `!&lsquo; followed by the end
of a line or two spaces, with any number of `)&rsquo;, `]&lsquo;, `&rsquo;&lsquo;, or `&ldquo;&rsquo;
characters allowed in between.  A sentence also begins or ends wherever
a paragraph begins or ends.  It is useful to follow this convention,
because it allows the Emacs sentence commands to distinguish between
periods that end a sentence and periods that indicate abbreviations.
\#+END<sub>SRC</sub> Quote</p>

<p><em>NOTE:</em>
<em>1. To use just one space between sentences, set the variable sentence-end-double-space to nil and to make the sentence commands stop for single spaces.</em>
<em>2. The variable sentence-end controls how to recognize the end of the sentence; its value is a regular expression, which is used to match the last few characters of the sentence.</em>
<em>3. Some languages such as Thai, doesn&rsquo;t end with periods; such cases can be handeld by setting variable sentence-end-without-period to t.</em></p>

<h2>Paragraphs<a id="sec-1-4" name="sec-1-4"></a></h2>

<table border="2" cellspacing="0" cellpadding="6" rules="groups" frame="hsides">


<colgroup>
<col  class="left" />

<col  class="left" />

<col  class="left" />
</colgroup>
<thead>
<tr>
<th scope="col" class="left">Keybindings</th>
<th scope="col" class="left">Commands</th>
<th scope="col" class="left">Description</th>
</tr>
</thead>

<tbody>
<tr>
<td class="left">M-{</td>
<td class="left">backward-paragraph</td>
<td class="left">move to the beginning of paragraph.</td>
</tr>


<tr>
<td class="left">M-}</td>
<td class="left">forward-paragraph</td>
<td class="left">Move to the end of the next paragraph.</td>
</tr>


<tr>
<td class="left">M-h</td>
<td class="left">mark-paragraph</td>
<td class="left">put point and mark around this or next paragraph.</td>
</tr>


<tr>
<td class="left">M-h C-w</td>
<td class="left">&#xa0;</td>
<td class="left">kills the paragraph around or after point.</td>
</tr>
</tbody>
</table>


<p><em>Notes:</em>
<em>1. The definition of a paragraph boundary is controlled by the variables <strong>paragraph-separate</strong> and  <strong>paragraph-start</strong>. The value of these are regular expression.</em>
<em>2. In fundamental mode, Paragraph-start is *&ldquo;\f\\|[ \t]*$&rdquo;* and matches lines that either start or separate paragraph.</em>
<em>3. Paragraph separate is *&ldquo;[ \t\f]*$&rdquo;* and matches lines  that separate paragraph without being part of any paragraph.</em></p>

<h2>Pages<a id="sec-1-5" name="sec-1-5"></a></h2>

<p>The files are divided into pages delimited by the &ldquo;formfeed character&rdquo; (ASCII code 2, denoted as <contorl-l>) and in emacs is escape sequence .</p>

<table border="2" cellspacing="0" cellpadding="6" rules="groups" frame="hsides">


<colgroup>
<col  class="left" />

<col  class="left" />

<col  class="left" />
</colgroup>
<thead>
<tr>
<th scope="col" class="left">Keybindings</th>
<th scope="col" class="left">Commands</th>
<th scope="col" class="left">Description</th>
</tr>
</thead>

<tbody>
<tr>
<td class="left">M-x What-page</td>
<td class="left">&#xa0;</td>
<td class="left">Display the page number and line number within that page</td>
</tr>


<tr>
<td class="left">C-x [</td>
<td class="left">backward-page</td>
<td class="left">Move point to the previous page boundary.</td>
</tr>


<tr>
<td class="left">C-x ]</td>
<td class="left">forward-page</td>
<td class="left">Move point ot next page boundary</td>
</tr>


<tr>
<td class="left">C-x C-p</td>
<td class="left">mark-page</td>
<td class="left">put point and mark around this page.</td>
</tr>


<tr>
<td class="left">C-x C-p C-w</td>
<td class="left">&#xa0;</td>
<td class="left">select and kill the page</td>
</tr>


<tr>
<td class="left">C-x l</td>
<td class="left">count-lines-page</td>
<td class="left">Count the lines in this page.</td>
</tr>
</tbody>
</table>


<p><em>Note:</em>
<em>page-delimiter control where the page begins. Its a regular expression *&ldquo;f&rdquo;* which matches a beginning of a line that separate pages.</em></p>

<h2>Filling Text<a id="sec-1-6" name="sec-1-6"></a></h2>

<p>Filling text means breaking up the lines that fit a specified width. Emacs does the filling in 2 ways. <strong>Auto Fill Mode</strong> inserts text with self-inserting characters and automatically fills it. <strong>Explicit fill Commands</strong>  can be used for editing texts.</p>

<h3>Auto Fill<a id="sec-1-6-1" name="sec-1-6-1"></a></h3>

<p>This is a minor mode in which the lines are broken automatically when they become too wide, breaking up of lines only happens when you type <SPC> or <RET>.</p>

<p>&rsquo;M-x auto-fill-mode' : Toggles the Auto Fill mode.</p>

<p>&lsquo;<SPC>/<RET>&rsquo; : Break lines when appropriate.</p>

<p>From the command line the auto-fill mode enables or disables the mode for current buffer. From LISP <em>auto-fill</em> is enabled when called with omitted or nil argument. for enabling in the major modes, add auto-fill-mode in mode hooks. When the mode it enabled it will show <strong>Fill</strong> in the mode line.</p>

<p>This mode breaks any line which goes longer than the desired width by pressing <SPC> or <RET>, and to insert a SPACE or any newline without breaking the lines tye <strong>C-q <SPC></strong> or <strong>C-q C-j</strong> and <strong>C-o</strong> for inserting new line.</p>

<p>Auto fill mode does not refill the paragraphs; it break lines but does not merge lines, editing in the middle of the paragraph can result in paragraph which is not correctly filled. To fill them correctly we may need to use explicit Fill Commands.</p>

<h3>Fill Commands<a id="sec-1-6-2" name="sec-1-6-2"></a></h3>

<table border="2" cellspacing="0" cellpadding="6" rules="groups" frame="hsides">


<colgroup>
<col  class="left" />

<col  class="left" />

<col  class="left" />
</colgroup>
<thead>
<tr>
<th scope="col" class="left">Key bindings</th>
<th scope="col" class="left">Command</th>
<th scope="col" class="left">Description</th>
</tr>
</thead>

<tbody>
<tr>
<td class="left">M-q</td>
<td class="left">fill-paragraph</td>
<td class="left">Fill current paragraph</td>
</tr>


<tr>
<td class="left">C-x f</td>
<td class="left">set-fill-column</td>
<td class="left">Set the fill column</td>
</tr>


<tr>
<td class="left">M-x fill-region</td>
<td class="left">fill-region</td>
<td class="left">Fill each paragraph in the region.</td>
</tr>


<tr>
<td class="left">M-x fill-region-as-paragraph</td>
<td class="left">&#xa0;</td>
<td class="left">Fill the region consider it as paragraph.</td>
</tr>


<tr>
<td class="left">M-o M-s</td>
<td class="left">&#xa0;</td>
<td class="left">Center a line.</td>
</tr>
</tbody>
</table>


<p><em>Notes:</em>
<em>1. M-q and fill-region uses the usual emacs criteria for finding paragraph boundaries, which refills everything between point and mark as single paragraph.</em>
<em>2. Numeric argument to <strong>M-q</strong> justifies the text as well as fill it.</em>
<em>3. To Remove extra spaces, use M-q with no argument.</em>
<em>4. The default vault for fill column is 70.</em>
<em>5. <strong>C-x f</strong> (sets-fill-column) sets the numeric value for fill column. With just C-u as argument it sets fill-column to the current horizantal position of point.</em>
<em>6. By default, emacs consider a period followed  by two spaces or by a newline as the end of sentence; a period with just one space will be called as abbrevation and not the end of the sentence.</em>
<em>7. Setting &lsquo;sentence-end-double-space&rsquo; to nil the fill commands will break a line after a period followed by a period and a space.</em></p>

<h3>The Fill Prefix<a id="sec-1-6-3" name="sec-1-6-3"></a></h3>

<table border="2" cellspacing="0" cellpadding="6" rules="groups" frame="hsides">


<colgroup>
<col  class="left" />

<col  class="left" />

<col  class="left" />
</colgroup>
<thead>
<tr>
<th scope="col" class="left">Keybindings</th>
<th scope="col" class="left">Command</th>
<th scope="col" class="left">Description</th>
</tr>
</thead>

<tbody>
<tr>
<td class="left">C-x .</td>
<td class="left">set-fill-prefix</td>
<td class="left">Set the fill prefix</td>
</tr>


<tr>
<td class="left">M-q</td>
<td class="left">fill-paragraph</td>
<td class="left">Fill a paragraph using current fill prefix</td>
</tr>


<tr>
<td class="left">M-x fill-individual-paragraphs</td>
<td class="left">&#xa0;</td>
<td class="left">Fill the region, considering each change of indentation as starting a new paragraph.</td>
</tr>


<tr>
<td class="left">M-x fill-nonuniform-paragraphs</td>
<td class="left">&#xa0;</td>
<td class="left">Consider only paragraph separator lines as starting a new paragraph.</td>
</tr>
</tbody>
</table>


<p><em>Notes:</em>
<em>1. Move to a line which starts with desired prefix, put point at the end of the prefix and type C-x .</em>
<em>2. To turn off a prefix, specify an empty prefix: type C-x . with point at the beginning of line.</em>
<em>3. The fill prefix is stored in fill-prefix variable. if the value is nil, then there is no fill prefix.</em></p>

<p>This feature allows paragraphs to be filled so each line starts with a special string of characters (such a sequence of spaces, giving and indented paragraph). you can specify fill prefix explicitly; otherwise emacs tries to deduce automatically.</p>

<h3>Adaptive Fill.<a id="sec-1-6-4" name="sec-1-6-4"></a></h3>

<p>The fill command deduce the proper fill prefix for a paragraph automatically in some cases; either white spaces or certain precaution characters at the beginning of line are propagated to all lines of the paragraph.</p>

<p>If the paragraph has two or more lines, the fill prefix is taken from the paragraph&rsquo;s second line, but only if it appears on the first line as well.</p>

<p>If a paragraph has just one line, fill commands <span class="underline">may</span> take a prefix from that line.  The decision is complicated because there are three reasonable things to do in such a case:</p>

<ul>
<li><p>Use the first line&rsquo;s prefix on all the lines of the paragraph.</p></li>
<li><p>Indent subsequent lines with whitespace, so that they line up under the text that follows the prefix on the first line, but don&rsquo;t actually copy the    <br/>
prefix from the first line.</p></li>
<li><p>Don&rsquo;t do anything special with the second and following lines.</p></li>
</ul>


<p>All three of these styles of formatting are commonly used.  So the fill commands try to determine what you would like, based on the prefix that appears and on the major mode.  Here is how.</p>

<p>If the prefix found on the first line matches `adaptive-fill-first-line-regexp', or if it appears to be a comment-starting sequence (this depends on the major mode), then the prefix found is used for filling the paragraph, provided it would not act as a paragraph starter on subsequent lines.</p>

<p>Otherwise, the prefix found is converted to an equivalent number of spaces, and those spaces are used as the fill prefix for the rest of the lines, provided they would not act as a paragraph starter on subsequent lines.</p>

<p>In Text mode, and other modes where only blank lines and page delimiters separate paragraphs, the prefix chosen by adaptive filling never acts as a paragraph starter, so it can always be used for filling.</p>

<p>The variable `adaptive-fill-regexp' determines what kinds of line beginnings can serve as a fill prefix: any characters at the start of the line that match this regular expression are used.  If you set the variable `adaptive-fill-mode' to `nil', the fill prefix is never chosen automatically.</p>

<p>You can specify more complex ways of choosing a fill prefix automatically by setting the variable `adaptive-fill-function' to a function.  This function is called with point after the left margin of a line, and it should return the appropriate fill prefix based on that line.  If it returns `nil', `adaptive-fill-regexp' gets a chance to find a prefix.</p>

<h2>Case<a id="sec-1-7" name="sec-1-7"></a></h2>

<table border="2" cellspacing="0" cellpadding="6" rules="groups" frame="hsides">


<colgroup>
<col  class="left" />

<col  class="left" />

<col  class="left" />
</colgroup>
<thead>
<tr>
<th scope="col" class="left">Keybindings</th>
<th scope="col" class="left">Commands</th>
<th scope="col" class="left">Description</th>
</tr>
</thead>

<tbody>
<tr>
<td class="left">M-l</td>
<td class="left">downcase-word</td>
<td class="left">Convert the following word to lower case.</td>
</tr>


<tr>
<td class="left">M-u</td>
<td class="left">upcase-word</td>
<td class="left">Convert the following word to upper case.</td>
</tr>


<tr>
<td class="left">M-c</td>
<td class="left">capitalize-word</td>
<td class="left">Capitalize the following word.</td>
</tr>


<tr>
<td class="left">C-x C-l</td>
<td class="left">downcase-region</td>
<td class="left">Convert region to lowercase.</td>
</tr>


<tr>
<td class="left">C-x C-u</td>
<td class="left">upcase-region</td>
<td class="left">Convert region to upper case.</td>
</tr>
</tbody>
</table>


<p><em>Note:</em>
<em>1. When a negative argument, the case conversion applies to appropriate no. of words before point, but do not move the point, its convinent if I typed something in wrong case and want to correct the case.</em>
<em>2. In case the command to change case is given in the middle of the word, the case change would happen from the point to the end of the word.</em></p>

<h2>Text Mode<a id="sec-1-8" name="sec-1-8"></a></h2>

<p>This is the major mode for editing the text language, any file ending with .txt will automatically enables this mode; and this mode can also be called by M-x text-mode. Blank lines and page delimiters separate paragraphs, and as a result paragraphs can be indented, and adaptive filling determines what indentation to use when filling a paragraph. The <TAB> usually inserts whitespace up to the next tab stop, instead of indenting the current line.</p>

<p>Text mode turns off comments features except when you explicitly invoke them. It changes so that the single quotes are considered part of the words. But if a word starts with a single quote it is treated as a prefix for the purpose of capitalization. Entering text-mode invokes text-mode-hook.</p>

<h2>Outline Mode<a id="sec-1-9" name="sec-1-9"></a></h2>

<p>This is major mode derived from Text mode, which is specialized for editing outlines; it provides commands to navigate between entries in the outline structure. Type M-x outline-mode to switch to outline mode, entering this mode runs the hook text-mode-hook followed by outline-mode-hook.</p>

<p>When in outline mode use command to make a line invisible it disappears the line and ellipsis(three periods in a row) is displayed at the end of the previous visible line.</p>

<p>Editing command on lines, such as C-n and C-p treat the text of the invisible line as part of the previous visible line.</p>

<p>outline-minor-mode toggle outline minor mode in the current buffer, it is a buffer-local minor mode which provides the same commands as the major mode for the current buffer, this provides special keybindings with C-c prefix, and C-c @ as the prefix in minor-mode.</p>

<h3>Outline Format<a id="sec-1-9-1" name="sec-1-9-1"></a></h3>

<p>Outline mode assumes the the lines in the buffer are of two types:
&ldquo;heading lines&rdquo; and &ldquo;body lines&rdquo;</p>

<p>Heading line: start with one or more asterisk (&lsquo;*&rsquo;); the number of asterisks determines the depth of the heading in the outline structure.
Body Line: Any line which is not a heading line is a body line. Body line belong with a preceding heading line.</p>

<p>A heading line and a body line collectively is called as an entry.</p>

<h3>Outline mode commands<a id="sec-1-9-2" name="sec-1-9-2"></a></h3>

<table border="2" cellspacing="0" cellpadding="6" rules="groups" frame="hsides">


<colgroup>
<col  class="left" />

<col  class="left" />

<col  class="left" />
</colgroup>
<thead>
<tr>
<th scope="col" class="left">Key bindings</th>
<th scope="col" class="left">Commands</th>
<th scope="col" class="left">Description</th>
</tr>
</thead>

<tbody>
<tr>
<td class="left">C-c C-n</td>
<td class="left">outline-next-visible-heading</td>
<td class="left">Move point to the next visible heading</td>
</tr>


<tr>
<td class="left">C-c C-p</td>
<td class="left">outline-previous-visible-heading</td>
<td class="left">Move point to the previous visible heading.</td>
</tr>


<tr>
<td class="left">C-c C-f</td>
<td class="left">outline-forward-same-level</td>
<td class="left">Move point to the next visible heading line at the same level.</td>
</tr>


<tr>
<td class="left">C-c C-b</td>
<td class="left">outline-backward-same-level</td>
<td class="left">Move point to previous heading line at the same level.</td>
</tr>


<tr>
<td class="left">C-c C-u</td>
<td class="left">outline-up-heading</td>
<td class="left">Move point up to a lower-level.</td>
</tr>
</tbody>
</table>


<h3>Outline visibility commands<a id="sec-1-9-3" name="sec-1-9-3"></a></h3>

<table border="2" cellspacing="0" cellpadding="6" rules="groups" frame="hsides">


<colgroup>
<col  class="left" />

<col  class="left" />

<col  class="left" />
</colgroup>
<thead>
<tr>
<th scope="col" class="left">Keybindings</th>
<th scope="col" class="left">Commands</th>
<th scope="col" class="left">Description</th>
</tr>
</thead>

<tbody>
<tr>
<td class="left">C-c C-c</td>
<td class="left">hide-entry</td>
<td class="left">Make the current heading line's body invisible</td>
</tr>


<tr>
<td class="left">C-c C-e</td>
<td class="left">show-entry</td>
<td class="left">Make the current heading line's body visible</td>
</tr>


<tr>
<td class="left">C-c C-d</td>
<td class="left">hide-subtree</td>
<td class="left">Make everything under the heading invisible excluding the heading</td>
</tr>


<tr>
<td class="left">C-c C-s</td>
<td class="left">show-subtree</td>
<td class="left">Make everything under the current heading visible</td>
</tr>


<tr>
<td class="left">C-c C-l</td>
<td class="left">hide-leaves</td>
<td class="left">Make the body of the current heading line, and all of its subheadings</td>
</tr>


<tr>
<td class="left">C-c C-k</td>
<td class="left">show-branches</td>
<td class="left">Make all subheading of the current heading line, at all levels, visible</td>
</tr>


<tr>
<td class="left">C-c C-i</td>
<td class="left">show-children</td>
<td class="left">Make immediate subheadings of the current heading line visible</td>
</tr>


<tr>
<td class="left">C-c C-t</td>
<td class="left">hide-body</td>
<td class="left">Make all body lines in the buffer invisible</td>
</tr>


<tr>
<td class="left">C-c C-a</td>
<td class="left">show-all</td>
<td class="left">Make all line in the buffer visible</td>
</tr>


<tr>
<td class="left">C-c C-q</td>
<td class="left">hide-sublevels</td>
<td class="left">Hide everything except the top N level of heading lines</td>
</tr>


<tr>
<td class="left">C-c C-o</td>
<td class="left">hide-other</td>
<td class="left">HIde everything except the heading or the body that point is in</td>
</tr>
</tbody>
</table>


<p>And most of these commands may work differently in org-mode, the org-mode is an advance implementation of outline-mode. I will be writing about this mode in my later days. It may confuse me at a later stage as mainly I use org-mode for my purposes of note taking and writing this blog. Let me provide some brief introduction to the org-mode.</p>

<h2>Org Mode<a id="sec-1-10" name="sec-1-10"></a></h2>

<p>Org mode, as in outline mode, each entry has a heading line that starts with one or more asterisk (*); Any line beginning with a &lsquo;#&rsquo; is considered as a comment. and it also provides commands to view and manipulate the outline structure.</p>

<p>The simplest of these commands is <TAB> (org-cycle). If invoked on heading line, it cycles through different visiblity states of that subtree:
1.  Showing only the heading line.
2.  Show only the heading lines and the heading lines of its direct children.
3.  Show the entire subtree.</p>

<p>The <S-TAB> (org-shifttab) in an org mode cycle visiblity of entire online subtree
1.  Show only top-level heading lines.
2.  Show all heading lines but no body lines.
3.  Show everything.</p>

<p>We can move the entire entry up and down in the buffer, including its body lines and subtree, by typing M-<up> (org-metaup) or M-<down> (org-metadown) on the heading line. Similarly, it can promote or demote the heading line with M-<left> (org-metaleft) and M-&lt;right (org-metaright). For details, The Org Mode Manual.</p>

<h3>Org as an Organizer<a id="sec-1-10-1" name="sec-1-10-1"></a></h3>

<p>You can tag an Org entry as a &ldquo;TODO&rdquo; by typing <strong>C-c C-t</strong> (org-todo) anywhere in the entry. This adds <em>TODO</em> keyword and typing the keyword <strong>C-c C-t</strong> again switches the keyword to <em>DONE</em>; press <strong>C-c C-t</strong> again and it will remove the keyword entirely. They keywords can be customized using the variable &lsquo;org-todo-keywords&rsquo;</p>

<p>With the possiblity of marking an entry as TODO, we can also attach a date to it by typing <strong>C-c C-s</strong> (org-schedule), This prompts for a date by popping a calendar, and then adds the tag &lsquo;SCHEDULED&rsquo;, together with the selected date, beneath the heading line. <strong>C-c C-d</strong> (org-deadline) have the same effect except it adds the tag &lsquo;DEADLINE&rsquo;.</p>

<p>Once you have some planned TODO items, you can add that file to the list of &ldquo;agenda fileS&rdquo; by typing <strong>C-c [</strong> (org-agenda-file-to-front). It allows us to maintain multiple agenda  files. The list of these agenda files are stored in the variable &lsquo;org-agenda-files&rsquo;.</p>

<p>Typing M-x org-agenda lets view items coming from agenda file, this command prompts for what we want to see: a list of things to do this week, a list of TODO items with specific keywords.</p>

<h3>Org as an authoring system<a id="sec-1-10-2" name="sec-1-10-2"></a></h3>

<p>To format org notes nicely and to prepare them for export and publication, <strong>C-c C-e</strong> (org-export) to export buffer and prompts for a export format; includes HTML, LaTeX, OpenDocument(.odt), and PDF.</p>

<p>To export several files at once to a specified directory, either locally or over the network, we can define a list of projects through the variable &lsquo;org-publish-project-alist&rsquo;</p>

<p>Org supports a simple markup scheme for applying text formatting to exported documents:</p>

<ul>
<li>This text is <em>emphasized</em></li>
<li>This text is <strong>in bold</strong></li>
<li>This text is <span class="underline">underlined</span></li>
<li>This text uses <code>a teletype font</code></li>
</ul>


<blockquote><p>``This is a quote.&lsquo;&rsquo;</p></blockquote>

<pre><code>This is an example.
</code></pre>

<h2>TeX Mode<a id="sec-1-11" name="sec-1-11"></a></h2>

<p>Emacs provides special major modes for editing files written in TeX and its related formats. TeX is a powerful text formatter written by Donald Knuth; like GNU Emacs. Latex is a simplified input format for TeX implemented using TeX macros. DocTeX is a special file format in which the LateX sources are written, combining sources with documentation.</p>

<p>TeX mode has four variants:
1.  Plain TeX mode
2.  LateX mode.
3.  DocTeX mode.
4.  SliTeX mode.</p>

<p>These distinc major modes differ only slightly, and are designed for editing the four different format. Emacs selects the appropriate mode by looking at the contents of the buffer. Emacs chooses the mode specified by the variable &lsquo;tex-default-mode&rsquo;; its default value is latex-mode. If Emacs doesn&rsquo;t get it right you can select the correct variant of TeX using the command &rsquo;M-x plain-tex-mode', &rsquo;M-x latex-mode', &rsquo;M-x slitex-mode', or &rsquo;M-x doctex-mode'.</p>

<h2>SGML and HTML Modes<a id="sec-1-12" name="sec-1-12"></a></h2>

<p>HTML mode is slightly customizable variant of SGML mode.</p>

<table border="2" cellspacing="0" cellpadding="6" rules="groups" frame="hsides">


<colgroup>
<col  class="left" />

<col  class="left" />

<col  class="left" />
</colgroup>
<thead>
<tr>
<th scope="col" class="left">Keybindings</th>
<th scope="col" class="left">Command</th>
<th scope="col" class="left">Description</th>
</tr>
</thead>

<tbody>
<tr>
<td class="left">C-C C-n</td>
<td class="left">sgml-name-char</td>
<td class="left">Interactively specify a special character and insert the SGML '&' command for that character</td>
</tr>


<tr>
<td class="left">C-c C-t</td>
<td class="left">sgml-tag</td>
<td class="left">Specify a tag and its attribute.</td>
</tr>


<tr>
<td class="left">C-c C-a</td>
<td class="left">sgml-attributes</td>
<td class="left">insert attribute value for the current tag</td>
</tr>


<tr>
<td class="left">C-c C-f</td>
<td class="left">sgml-skip-tag-forward</td>
<td class="left">skip across a balanced tag group.</td>
</tr>


<tr>
<td class="left">C-c C-b</td>
<td class="left">sgml-skip-tag-backward</td>
<td class="left">skip backward across a balanced tag group.</td>
</tr>


<tr>
<td class="left">C-c C-d</td>
<td class="left">sgml-delete-tag</td>
<td class="left">Delete the tag</td>
</tr>


<tr>
<td class="left">C-c ? TAG <RET></td>
<td class="left">sgml-tag-help</td>
<td class="left">display the description and the meaning of the tag</td>
</tr>


<tr>
<td class="left">C-c /</td>
<td class="left">sgml-close-tag</td>
<td class="left">insert a close tag for the innermost undetermind tag</td>
</tr>


<tr>
<td class="left">C-c 8</td>
<td class="left">sgml-name-8bit-mode</td>
<td class="left">Toggle a minor mode in which Latin-1 characters insert the corresponding SGML commands.</td>
</tr>


<tr>
<td class="left">C-c C-v</td>
<td class="left">sgml-validate</td>
<td class="left">run a shell commands to validate the current buffer as SGML.</td>
</tr>


<tr>
<td class="left">C-c <TAB></td>
<td class="left">sgml-tags-invisible</td>
<td class="left">Toggle the visiblity of existing tags in the buffer.</td>
</tr>
</tbody>
</table>


<p>There is a major mode for editing XML documents called as nXML mode. This is a mode which can recognize any XML schema and use them to provide completion on XML elements via &rsquo;M-<TAB>, as well as on the fly XML validation with error highlighting. To enable nXML mode for existing buffer type <strong>M-x nxml-mode</strong> or <strong>M-x xml-mode</strong></p>

<p>For files with extension .xml nxml-mode is used by default; and for files with xhtml html-mode is used.</p>

<h2>Nroff mode<a id="sec-1-13" name="sec-1-13"></a></h2>

<p>This is a major mode derived from Text mode and is specialized for editing nroff files e.g. UNIX man pages. <strong>M-x nroff-mode</strong> enters into this mode, and runs the hook &lsquo;text-mode-hook&rsquo;, then &lsquo;nroff-mode-hook&rsquo;; nroff command lines are treated as paragraph separators, pages are separated by &lsquo;.bp&rsquo; commands, and comments start with backslash-doublequote (\&ldquo;)</p>

<table border="2" cellspacing="0" cellpadding="6" rules="groups" frame="hsides">


<colgroup>
<col  class="left" />

<col  class="left" />

<col  class="left" />
</colgroup>
<thead>
<tr>
<th scope="col" class="left">Keybindings</th>
<th scope="col" class="left">Commands</th>
<th scope="col" class="left">Description</th>
</tr>
</thead>

<tbody>
<tr>
<td class="left">M-n</td>
<td class="left">forward-next-line</td>
<td class="left">move to the beginning of next line, which is not a nroff command</td>
</tr>


<tr>
<td class="left">M-p</td>
<td class="left">backward-next-line</td>
<td class="left">same but moves up</td>
</tr>


<tr>
<td class="left">M-?</td>
<td class="left">count-text-lines</td>
<td class="left">display in the echo area the number of text lines.</td>
</tr>
</tbody>
</table>


<p><strong>M-x electric-nroff-mode</strong> toggles the Electric Nroff mode and is a minor-mode and can be used with Nroff mode.</p>

<h2>Enriched Text<a id="sec-1-14" name="sec-1-14"></a></h2>

<p>This is a minor mode for editing formatted text files in a WYSIWYG (&ldquo;what you see is what you get&rdquo;) fashion. When Enriched mode is enabled we can apply various formatting properties to the text in the buffer. This mode is typically used by Text mode and is not compatible with Font Lock Mode which is used by many major modes, for syntax highlighting. When you save a buffer with enriched mode enabled, it is saved using the &lsquo;text/enriched&rsquo; format, including the formatting indentation.</p>

<p>To create a new file of formatted text, visit file and type <strong>M-x enriched-mode</strong></p>

<h2>Editing Text Based Tables<a id="sec-1-15" name="sec-1-15"></a></h2>

<p>The table package provides commands to easily edit the text-based tables. A &ldquo;table&rdquo; consist of t a rectangular text area which is divided into &ldquo;cells&rdquo;. Each cell must be one character wide and one character high, not counting its border lines. A cell can be subdivided into more cells, but they cannot overlap.</p>

<table border="2" cellspacing="0" cellpadding="6" rules="groups" frame="hsides">


<colgroup>
<col  class="left" />

<col  class="left" />

<col  class="left" />
</colgroup>
<thead>
<tr>
<th scope="col" class="left">Commands</th>
<th scope="col" class="left">Default</th>
<th scope="col" class="left">Description</th>
</tr>
</thead>

<tbody>
<tr>
<td class="left">table-cell-vertical-char</td>
<td class="left">Pipe</td>
<td class="left">The character used for vertical lines.</td>
</tr>


<tr>
<td class="left">table-cell-horizontal-chars</td>
<td class="left">- =</td>
<td class="left">character used for horizontal lines.</td>
</tr>


<tr>
<td class="left">table-cell-intersection-char</td>
<td class="left">+</td>
<td class="left">character used for intersection of horizontal and vertical lines</td>
</tr>
</tbody>
</table>


<p>The following are examples of <span class="underline">invalid</span> tables:</p>

<!-- This HTML table template is generated by emacs 24.5.1 -->


<table border="1">
  <tr>
    <td align="left" valign="top">
      &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<br />
      &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<br />
      --+&nbsp;&nbsp;<br />
      &nbsp;&nbsp;|&nbsp;&nbsp;<br />
      &nbsp;&nbsp;|&nbsp;&nbsp;
    </td>
  </tr>
</table>


<p>a          b          c</p>

<p>From left to right:</p>

<ol>
<li><p>Overlapped cells or non-rectangular cells are not allowed.</p></li>
<li><p>The border must be rectangular.</p></li>
<li><p>Cells must have a minimum width/height of one character.</p></li>
</ol>


<h2>Two column editing<a id="sec-1-16" name="sec-1-16"></a></h2>

<p>Two columns lets you convinently edit two side-by-side columns of text. It uses two side-by-side windows, each showing its own buffer. There are three ways to enter two column mode:</p>

<ol>
<li><p><F2> 2 or C-x 6 2 - Enter two columns mode with the current buffer on the left and on the right, a buffer whose name is based on the current buffer&rsquo;s name.</p></li>
<li><p><F2> s  or C-x 6 s - Split the current buffer, which contains two column text, into two buffers and display them side by side.</p></li>
<li><p><F2> b BUFFER <RET> or C-x 6 b BUFFER <RET> - Enter two columns mode using the current buffer as the left-hand buffer, and using buffer BUFFER as the right-hand buffer.</p></li>
</ol>

</div>
  
  


    </article>
  
  <div class="pagination">
    
      <a class="prev" href="/blog/posts/2">&larr; Older</a>
    
    <a href="/blog/archives">Blog Archives</a>
    
  </div>
</div>
<aside class="sidebar">
  
    
  
</aside>

    </div>
  </div>
  <footer role="contentinfo"><p>
  Copyright &copy; 2016 - Om Prakash Singh -
  <span class="credit">Powered by <a href="http://octopress.org">Octopress</a> | Themed with <a href="https://github.com/lucaslew/whitespace">Whitespace</a></span>
</p>

</footer>
  

<script type="text/javascript">
      var disqus_shortname = 'omps-in';
      
        
        var disqus_script = 'count.js';
      
    (function () {
      var dsq = document.createElement('script'); dsq.type = 'text/javascript'; dsq.async = true;
      dsq.src = '//' + disqus_shortname + '.disqus.com/' + disqus_script;
      (document.getElementsByTagName('head')[0] || document.getElementsByTagName('body')[0]).appendChild(dsq);
    }());
</script>










  <script type="text/javascript">
    (function(){
      var twitterWidgets = document.createElement('script');
      twitterWidgets.type = 'text/javascript';
      twitterWidgets.async = true;
      twitterWidgets.src = '//platform.twitter.com/widgets.js';
      document.getElementsByTagName('head')[0].appendChild(twitterWidgets);
    })();
  </script>





</body>
</html>
